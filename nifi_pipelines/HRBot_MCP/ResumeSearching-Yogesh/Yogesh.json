{"flowContents":{"identifier":"13764443-048a-35e4-9c03-33a02a70ece2","instanceIdentifier":"a0a5d2ea-0197-1000-0000-00006c11fe5f","name":"Yogesh","comments":"","position":{"x":-3080.0,"y":-896.0},"processGroups":[{"identifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","instanceIdentifier":"71bc97ce-1ab6-3ed1-8300-404a6f97f20c","name":"embedding for json files","comments":"","position":{"x":280.0,"y":-1008.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"ab0444f8-ffd1-3b22-ffff-ffffc6fe85f8","instanceIdentifier":"dac15520-bde9-3b26-a6ea-12806d181a9c","name":"retriever","comments":"","position":{"x":272.0,"y":656.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":null,"Working Directory":"/home/nifi/nifi2/users/yogesh/codes","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/codes/retrieve.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"fdeb8bd8-ea33-3dd4-984d-72da86593b40","instanceIdentifier":"2a9f9dc0-5bff-3a7b-a512-39c5cc9ae162","name":"flatten json","comments":"","position":{"x":-928.0,"y":240.0},"type":"org.apache.nifi.processors.groovyx.ExecuteGroovyScript","bundle":{"group":"org.apache.nifi","artifact":"nifi-groovyx-nar","version":"2.4.0"},"properties":{"groovyx-script-body":"import groovy.json.JsonSlurper\nimport groovy.json.JsonOutput\nimport org.apache.commons.io.IOUtils\nimport java.nio.charset.StandardCharsets\nimport java.io.InputStream\nimport java.io.OutputStream\nimport java.io.IOException\nimport org.apache.nifi.processor.io.InputStreamCallback\nimport org.apache.nifi.processor.io.OutputStreamCallback\n\ndef flowFile = session.get()\nif (!flowFile) return\n\ntry {\n    def content = ''\n\n    // Read JSON input from FlowFile content\n    session.read(flowFile, new InputStreamCallback() {\n        @Override\n        void process(InputStream inputStream) throws IOException {\n            content = IOUtils.toString(inputStream, StandardCharsets.UTF_8)\n        }\n    })\n\n    if (!content?.trim()) throw new IllegalArgumentException(\"FlowFile content is empty\")\n\n    def parsed = new JsonSlurper().parseText(content.trim())\n    if (!(parsed instanceof List)) {\n        parsed = [parsed]  // Convert to list if single JSON object\n    }\n\n    parsed.eachWithIndex { doc, idx ->\n        def name = doc['name']?.toString()?.replaceAll(\"\\\\s+\", \"_\") ?: \"unknown\"\n        def empId = doc['employee_id']?.toString() ?: idx.toString()\n        def filename = \"${empId}.txt\"\n        def outputJson = JsonOutput.toJson([\n            filename: filename,\n            text: doc.toString()\n        ])\n\n        def ff = session.create(flowFile)\n        session.write(ff, new OutputStreamCallback() {\n            @Override\n            void process(OutputStream out) throws IOException {\n                out.write(JsonOutput.prettyPrint(outputJson).getBytes(StandardCharsets.UTF_8))\n            }\n        })\n\n        session.transfer(ff, REL_SUCCESS)\n    }\n\n    session.remove(flowFile)\n\n} catch (Exception e) {\n    log.error(\"ExecuteScript Error: ${e.message}\", e)\n    session.transfer(flowFile, REL_FAILURE)\n}\n","groovyx-failure-strategy":"rollback","groovyx-additional-classpath":null,"groovyx-script-file":null},"propertyDescriptors":{"groovyx-script-body":{"name":"groovyx-script-body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-failure-strategy":{"name":"groovyx-failure-strategy","displayName":"Failure strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-additional-classpath":{"name":"groovyx-additional-classpath","displayName":"Additional classpath","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-script-file":{"name":"groovyx-script-file","displayName":"Script File","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["FILE"]}}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"39486a70-513f-337d-ffff-ffffd8b6d403","instanceIdentifier":"e6658d34-fafe-37dc-81e4-b3efff2935d2","name":"ExecuteStreamCommand","comments":"","position":{"x":-1480.0,"y":136.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":null,"Working Directory":"/home/nifi/nifi2/users/yogesh/codes/","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/codes/keyword_search.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","nonzero status"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"ff6a5915-b9d3-387f-a3f9-1b7ef939e68b","instanceIdentifier":"aad49ab6-0197-1000-0000-00001002b102","name":"LogAttribute","comments":"","position":{"x":-336.0,"y":288.0},"type":"org.apache.nifi.processors.standard.LogAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"Log prefix":null,"character-set":"UTF-8","Log FlowFile Properties":"true","Log Level":"info","attributes-to-ignore-regex":null,"Attributes to Ignore":null,"Attributes to Log":null,"attributes-to-log-regex":".*","Output Format":"Line per Attribute","Log Payload":"false"},"propertyDescriptors":{"Log prefix":{"name":"Log prefix","displayName":"Log prefix","identifiesControllerService":false,"sensitive":false,"dynamic":false},"character-set":{"name":"character-set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Log FlowFile Properties":{"name":"Log FlowFile Properties","displayName":"Log FlowFile Properties","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Log Level":{"name":"Log Level","displayName":"Log Level","identifiesControllerService":false,"sensitive":false,"dynamic":false},"attributes-to-ignore-regex":{"name":"attributes-to-ignore-regex","displayName":"Attributes to Ignore by Regular Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Attributes to Ignore":{"name":"Attributes to Ignore","displayName":"Attributes to Ignore","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Attributes to Log":{"name":"Attributes to Log","displayName":"Attributes to Log","identifiesControllerService":false,"sensitive":false,"dynamic":false},"attributes-to-log-regex":{"name":"attributes-to-log-regex","displayName":"Attributes to Log by Regular Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Format":{"name":"Output Format","displayName":"Output Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Log Payload":{"name":"Log Payload","displayName":"Log Payload","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"abc7a5fe-2ff8-316f-ffff-ffffd8b6d403","instanceIdentifier":"bf9eacad-1a3d-3b39-acf3-db62b5a4b0f8","name":"HandleHttpRequest","comments":"","position":{"x":-1472.0,"y":-64.0},"type":"org.apache.nifi.processors.standard.HandleHttpRequest","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"multipart-request-max-size":"1 MB","parameters-to-attributes":null,"Allow POST":"true","Hostname":"0.0.0.0","Default URL Character Set":"UTF-8","Allow DELETE":"true","Request Header Maximum Size":"8 KB","Maximum Threads":"200","HTTP Protocols":"HTTP_1_1","Additional HTTP Methods":null,"container-queue-size":"50","HTTP Context Map":"992a5dba-e5e2-399e-a8a1-07d5d5d9911b","multipart-read-buffer-size":"512 KB","SSL Context Service":null,"Allow OPTIONS":"false","Allowed Paths":"/keyword_search","Allow GET":"true","Allow HEAD":"false","Listening Port":"8083","Client Authentication":"No Authentication","Allow PUT":"true"},"propertyDescriptors":{"multipart-request-max-size":{"name":"multipart-request-max-size","displayName":"Multipart Request Max Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"parameters-to-attributes":{"name":"parameters-to-attributes","displayName":"Parameters to Attributes List","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow POST":{"name":"Allow POST","displayName":"Allow POST","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Hostname":{"name":"Hostname","displayName":"Hostname","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Default URL Character Set":{"name":"Default URL Character Set","displayName":"Default URL Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow DELETE":{"name":"Allow DELETE","displayName":"Allow DELETE","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Header Maximum Size":{"name":"Request Header Maximum Size","displayName":"Request Header Maximum Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Threads":{"name":"Maximum Threads","displayName":"Maximum Threads","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Protocols":{"name":"HTTP Protocols","displayName":"HTTP Protocols","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Additional HTTP Methods":{"name":"Additional HTTP Methods","displayName":"Additional HTTP Methods","identifiesControllerService":false,"sensitive":false,"dynamic":false},"container-queue-size":{"name":"container-queue-size","displayName":"Container Queue Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Context Map":{"name":"HTTP Context Map","displayName":"HTTP Context Map","identifiesControllerService":true,"sensitive":false,"dynamic":false},"multipart-read-buffer-size":{"name":"multipart-read-buffer-size","displayName":"Multipart Read Buffer Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Allow OPTIONS":{"name":"Allow OPTIONS","displayName":"Allow OPTIONS","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allowed Paths":{"name":"Allowed Paths","displayName":"Allowed Paths","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow GET":{"name":"Allow GET","displayName":"Allow GET","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow HEAD":{"name":"Allow HEAD","displayName":"Allow HEAD","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Listening Port":{"name":"Listening Port","displayName":"Listening Port","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Client Authentication":{"name":"Client Authentication","displayName":"Client Authentication","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow PUT":{"name":"Allow PUT","displayName":"Allow PUT","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"27fb1124-132e-3861-ffff-ffffc6fe85f8","instanceIdentifier":"1f68c98b-561c-3f86-82ab-760db9bfb536","name":"embedd generation","comments":"","position":{"x":256.0,"y":264.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"AWS_REGION":"us-west-2","argumentsStrategy":"Command Arguments Property","Working Directory":"/home/nifi/nifi2/users/yogesh/codes","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/codes/embedding.py","Max Attribute Length":"256","Output MIME Type":null,"Output Destination Attribute":null,"EMBEDDING_PROVIDER":"azure","EMBEDDING_MODEL":"text-embedding-ada-002","AZURE_OPENAI_EMBEDDING_MODEL":"text-embedding-ada-002"},"propertyDescriptors":{"AWS_REGION":{"name":"AWS_REGION","displayName":"AWS_REGION","identifiesControllerService":false,"sensitive":false,"dynamic":true},"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"AZURE_OPENAI_KEY":{"name":"AZURE_OPENAI_KEY","displayName":"AZURE_OPENAI_KEY","identifiesControllerService":false,"sensitive":true,"dynamic":true},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false},"AZURE_OPENAI_ENDPOINT":{"name":"AZURE_OPENAI_ENDPOINT","displayName":"AZURE_OPENAI_ENDPOINT","identifiesControllerService":false,"sensitive":true,"dynamic":true},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"EMBEDDING_PROVIDER":{"name":"EMBEDDING_PROVIDER","displayName":"EMBEDDING_PROVIDER","identifiesControllerService":false,"sensitive":false,"dynamic":true},"EMBEDDING_MODEL":{"name":"EMBEDDING_MODEL","displayName":"EMBEDDING_MODEL","identifiesControllerService":false,"sensitive":false,"dynamic":true},"AZURE_OPENAI_EMBEDDING_MODEL":{"name":"AZURE_OPENAI_EMBEDDING_MODEL","displayName":"AZURE_OPENAI_EMBEDDING_MODEL","identifiesControllerService":false,"sensitive":false,"dynamic":true},"AZURE_OPENAI_API_VERSION":{"name":"AZURE_OPENAI_API_VERSION","displayName":"AZURE_OPENAI_API_VERSION","identifiesControllerService":false,"sensitive":true,"dynamic":true}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"fd01addb-bb9c-33b1-a167-2d134c636de9","instanceIdentifier":"0b7174a8-e39d-3273-a73e-e9f6b348d8e6","name":"embedd generation","comments":"","position":{"x":-928.0,"y":408.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"AWS_REGION":"us-west-2","argumentsStrategy":"Command Arguments Property","Working Directory":"/home/nifi/nifi2/users/yogesh/codes","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/codes/embedding.py","Max Attribute Length":"256","Output MIME Type":null,"Output Destination Attribute":null,"EMBEDDING_PROVIDER":"azure","EMBEDDING_MODEL":"text-embedding-ada-002","AZURE_OPENAI_EMBEDDING_MODEL":"text-embedding-ada-002"},"propertyDescriptors":{"AWS_REGION":{"name":"AWS_REGION","displayName":"AWS_REGION","identifiesControllerService":false,"sensitive":false,"dynamic":true},"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"AZURE_OPENAI_KEY":{"name":"AZURE_OPENAI_KEY","displayName":"AZURE_OPENAI_KEY","identifiesControllerService":false,"sensitive":true,"dynamic":true},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false},"AZURE_OPENAI_ENDPOINT":{"name":"AZURE_OPENAI_ENDPOINT","displayName":"AZURE_OPENAI_ENDPOINT","identifiesControllerService":false,"sensitive":true,"dynamic":true},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"EMBEDDING_PROVIDER":{"name":"EMBEDDING_PROVIDER","displayName":"EMBEDDING_PROVIDER","identifiesControllerService":false,"sensitive":false,"dynamic":true},"EMBEDDING_MODEL":{"name":"EMBEDDING_MODEL","displayName":"EMBEDDING_MODEL","identifiesControllerService":false,"sensitive":false,"dynamic":true},"AZURE_OPENAI_EMBEDDING_MODEL":{"name":"AZURE_OPENAI_EMBEDDING_MODEL","displayName":"AZURE_OPENAI_EMBEDDING_MODEL","identifiesControllerService":false,"sensitive":false,"dynamic":true},"AZURE_OPENAI_API_VERSION":{"name":"AZURE_OPENAI_API_VERSION","displayName":"AZURE_OPENAI_API_VERSION","identifiesControllerService":false,"sensitive":true,"dynamic":true}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"5fe93400-7e92-3a12-ffff-ffffc6fe85f8","instanceIdentifier":"a254db4b-b4fa-3786-8af8-61371384bd67","name":"filter embedding","comments":"","position":{"x":272.0,"y":456.0},"type":"org.apache.nifi.processors.groovyx.ExecuteGroovyScript","bundle":{"group":"org.apache.nifi","artifact":"nifi-groovyx-nar","version":"2.4.0"},"properties":{"groovyx-script-body":"import org.apache.nifi.processor.io.StreamCallback\nimport java.nio.charset.StandardCharsets\nimport org.apache.commons.io.IOUtils\nimport groovy.json.JsonSlurper\nimport groovy.json.JsonOutput\n\ndef flowFile = session.get()\nif (!flowFile) return\n\nflowFile = session.write(flowFile, { inputStream, outputStream ->\n    def input = IOUtils.toString(inputStream, StandardCharsets.UTF_8)\n    def json = new JsonSlurper().parseText(input)\n\n    // Extract embedding array\n    def embeddingArray = json[\"embedding\"]\n\n    // Create output JSON\n    def outputJson = [query_vector: embeddingArray]\n    outputStream.write(JsonOutput.toJson(outputJson).getBytes(StandardCharsets.UTF_8))\n} as StreamCallback)\n\nsession.transfer(flowFile, REL_SUCCESS)\n","groovyx-failure-strategy":"rollback","groovyx-additional-classpath":null,"groovyx-script-file":null},"propertyDescriptors":{"groovyx-script-body":{"name":"groovyx-script-body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-failure-strategy":{"name":"groovyx-failure-strategy","displayName":"Failure strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-additional-classpath":{"name":"groovyx-additional-classpath","displayName":"Additional classpath","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-script-file":{"name":"groovyx-script-file","displayName":"Script File","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["FILE"]}}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"e0be79a4-36bb-3f40-8ce8-e0f3ae8a9331","instanceIdentifier":"7a5d8fd4-994a-3c14-b260-b56d9cf604be","name":"ListFile","comments":"","position":{"x":-928.0,"y":-112.0},"type":"org.apache.nifi.processors.standard.ListFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"Minimum File Age":"0 sec","et-initial-listing-target":"all","Maximum File Age":null,"max-listing-time":"3 mins","record-writer":null,"Maximum File Size":null,"et-time-window":"3 hours","et-node-identifier":"${hostname()}","Recurse Subdirectories":"true","File Filter":"[^\\.].*","Path Filter":null,"Include File Attributes":"true","Input Directory Location":"Local","listing-strategy":"timestamps","Input Directory":"/home/nifi/nifi2/users/yogesh/inputs/re","target-system-timestamp-precision":"auto-detect","track-performance":"false","max-performance-metrics":"100000","Minimum File Size":"0 B","Ignore Hidden Files":"true","et-state-cache":null,"max-operation-time":"10 secs"},"propertyDescriptors":{"Minimum File Age":{"name":"Minimum File Age","displayName":"Minimum File Age","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-initial-listing-target":{"name":"et-initial-listing-target","displayName":"Entity Tracking Initial Listing Target","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Age":{"name":"Maximum File Age","displayName":"Maximum File Age","identifiesControllerService":false,"sensitive":false,"dynamic":false},"max-listing-time":{"name":"max-listing-time","displayName":"Max Directory Listing Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"record-writer":{"name":"record-writer","displayName":"Record Writer","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Maximum File Size":{"name":"Maximum File Size","displayName":"Maximum File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-time-window":{"name":"et-time-window","displayName":"Entity Tracking Time Window","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-node-identifier":{"name":"et-node-identifier","displayName":"Entity Tracking Node Identifier","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Recurse Subdirectories":{"name":"Recurse Subdirectories","displayName":"Recurse Subdirectories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Filter":{"name":"File Filter","displayName":"File Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Path Filter":{"name":"Path Filter","displayName":"Path Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Include File Attributes":{"name":"Include File Attributes","displayName":"Include File Attributes","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Input Directory Location":{"name":"Input Directory Location","displayName":"Input Directory Location","identifiesControllerService":false,"sensitive":false,"dynamic":false},"listing-strategy":{"name":"listing-strategy","displayName":"Listing Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Input Directory":{"name":"Input Directory","displayName":"Input Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"target-system-timestamp-precision":{"name":"target-system-timestamp-precision","displayName":"Target System Timestamp Precision","identifiesControllerService":false,"sensitive":false,"dynamic":false},"track-performance":{"name":"track-performance","displayName":"Track Performance","identifiesControllerService":false,"sensitive":false,"dynamic":false},"max-performance-metrics":{"name":"max-performance-metrics","displayName":"Maximum Number of Files to Track","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Minimum File Size":{"name":"Minimum File Size","displayName":"Minimum File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore Hidden Files":{"name":"Ignore Hidden Files","displayName":"Ignore Hidden Files","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-state-cache":{"name":"et-state-cache","displayName":"Entity Tracking State Cache","identifiesControllerService":true,"sensitive":false,"dynamic":false},"max-operation-time":{"name":"max-operation-time","displayName":"Max Disk Operation Time","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"1 min","schedulingStrategy":"TIMER_DRIVEN","executionNode":"PRIMARY","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"860158ea-f801-3845-a36e-6af939e1141c","instanceIdentifier":"80e16c24-b7e2-3901-9f6c-1685c673ce42","name":"FetchFile","comments":"","position":{"x":-928.0,"y":64.0},"type":"org.apache.nifi.processors.standard.FetchFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"Move Conflict Strategy":"Rename","Log level when file not found":"ERROR","Move Destination Directory":null,"Log level when permission denied":"ERROR","File to Fetch":"${absolute.path}/${filename}","Completion Strategy":"None"},"propertyDescriptors":{"Move Conflict Strategy":{"name":"Move Conflict Strategy","displayName":"Move Conflict Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Log level when file not found":{"name":"Log level when file not found","displayName":"Log level when file not found","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Move Destination Directory":{"name":"Move Destination Directory","displayName":"Move Destination Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Log level when permission denied":{"name":"Log level when permission denied","displayName":"Log level when permission denied","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File to Fetch":{"name":"File to Fetch","displayName":"File to Fetch","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Completion Strategy":{"name":"Completion Strategy","displayName":"Completion Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"71f64684-efe6-3e35-0000-00003bda5ec1","instanceIdentifier":"2f2c87bb-b96c-3ccc-be5c-ca8a654c7f8f","name":"insert to elastic","comments":"","position":{"x":-936.0,"y":568.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":null,"Working Directory":"/home/nifi/nifi2/users/yogesh/codes","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/codes/insert.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"b9e41c8b-b1e6-3af8-ffff-ffffd8b6d403","instanceIdentifier":"7ba67028-e80c-3797-82bd-b410253b333d","name":"HandleHttpResponse","comments":"","position":{"x":-1488.0,"y":360.0},"type":"org.apache.nifi.processors.standard.HandleHttpResponse","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"HTTP Context Map":"992a5dba-e5e2-399e-a8a1-07d5d5d9911b","Attributes to add to the HTTP Response (Regex)":null,"HTTP Status Code":"200"},"propertyDescriptors":{"HTTP Context Map":{"name":"HTTP Context Map","displayName":"HTTP Context Map","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Attributes to add to the HTTP Response (Regex)":{"name":"Attributes to add to the HTTP Response (Regex)","displayName":"Attributes to add to the HTTP Response (Regex)","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Status Code":{"name":"HTTP Status Code","displayName":"HTTP Status Code","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"57a66c5a-28be-3bdd-ffff-ffffc6fe85f8","instanceIdentifier":"720ecadc-0460-36de-a019-94510567ff76","name":"flatten json","comments":"","position":{"x":256.0,"y":80.0},"type":"org.apache.nifi.processors.groovyx.ExecuteGroovyScript","bundle":{"group":"org.apache.nifi","artifact":"nifi-groovyx-nar","version":"2.4.0"},"properties":{"groovyx-script-body":"import groovy.json.JsonSlurper\nimport groovy.json.JsonOutput\nimport org.apache.commons.io.IOUtils\nimport java.nio.charset.StandardCharsets\nimport java.io.InputStream\nimport java.io.OutputStream\nimport java.io.IOException\nimport org.apache.nifi.processor.io.InputStreamCallback\nimport org.apache.nifi.processor.io.OutputStreamCallback\n\ndef flowFile = session.get()\nif (!flowFile) return\n\ntry {\n    def content = ''\n\n    // Read JSON input from FlowFile content\n    session.read(flowFile, new InputStreamCallback() {\n        @Override\n        void process(InputStream inputStream) throws IOException {\n            content = IOUtils.toString(inputStream, StandardCharsets.UTF_8)\n        }\n    })\n\n    if (!content?.trim()) throw new IllegalArgumentException(\"FlowFile content is empty\")\n\n    def parsed = new JsonSlurper().parseText(content.trim())\n    if (!(parsed instanceof List)) {\n        parsed = [parsed]  // Convert to list if single JSON object\n    }\n\n    parsed.eachWithIndex { doc, idx ->\n        def name = doc['name']?.toString()?.replaceAll(\"\\\\s+\", \"_\") ?: \"unknown\"\n        def empId = doc['employee_id']?.toString() ?: idx.toString()\n        def filename = \"${empId}_${name}.txt\"\n        def outputJson = JsonOutput.toJson([\n            filename: filename,\n            text: doc.toString()\n        ])\n\n        def ff = session.create(flowFile)\n        session.write(ff, new OutputStreamCallback() {\n            @Override\n            void process(OutputStream out) throws IOException {\n                out.write(JsonOutput.prettyPrint(outputJson).getBytes(StandardCharsets.UTF_8))\n            }\n        })\n\n        session.transfer(ff, REL_SUCCESS)\n    }\n\n    session.remove(flowFile)\n\n} catch (Exception e) {\n    log.error(\"ExecuteScript Error: ${e.message}\", e)\n    session.transfer(flowFile, REL_FAILURE)\n}\n","groovyx-failure-strategy":"rollback","groovyx-additional-classpath":null,"groovyx-script-file":null},"propertyDescriptors":{"groovyx-script-body":{"name":"groovyx-script-body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-failure-strategy":{"name":"groovyx-failure-strategy","displayName":"Failure strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-additional-classpath":{"name":"groovyx-additional-classpath","displayName":"Additional classpath","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-script-file":{"name":"groovyx-script-file","displayName":"Script File","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["FILE"]}}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"ebc93943-55dc-3bf6-ffff-ffffc6fe85f8","instanceIdentifier":"d1654e86-1c3e-3da7-b1d2-370417d66e0f","name":"HandleHttpResponse","comments":"","position":{"x":280.0,"y":840.0},"type":"org.apache.nifi.processors.standard.HandleHttpResponse","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"HTTP Context Map":"992a5dba-e5e2-399e-a8a1-07d5d5d9911b","Attributes to add to the HTTP Response (Regex)":null,"HTTP Status Code":"200"},"propertyDescriptors":{"HTTP Context Map":{"name":"HTTP Context Map","displayName":"HTTP Context Map","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Attributes to add to the HTTP Response (Regex)":{"name":"Attributes to add to the HTTP Response (Regex)","displayName":"Attributes to add to the HTTP Response (Regex)","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Status Code":{"name":"HTTP Status Code","displayName":"HTTP Status Code","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"4051d608-2b96-3301-ffff-ffffc6fe85f8","instanceIdentifier":"82b58b10-f627-348e-bacc-572508a728dd","name":"query_api","comments":"","position":{"x":272.0,"y":-128.0},"type":"org.apache.nifi.processors.standard.HandleHttpRequest","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"multipart-request-max-size":"1 MB","parameters-to-attributes":null,"Allow POST":"true","Hostname":"0.0.0.0","Default URL Character Set":"UTF-8","Allow DELETE":"true","Request Header Maximum Size":"8 KB","Maximum Threads":"200","HTTP Protocols":"HTTP_1_1","Additional HTTP Methods":null,"container-queue-size":"50","HTTP Context Map":"992a5dba-e5e2-399e-a8a1-07d5d5d9911b","multipart-read-buffer-size":"512 KB","SSL Context Service":null,"Allow OPTIONS":"false","Allowed Paths":null,"Allow GET":"true","Allow HEAD":"false","Listening Port":"8083","Client Authentication":"No Authentication","Allow PUT":"true"},"propertyDescriptors":{"multipart-request-max-size":{"name":"multipart-request-max-size","displayName":"Multipart Request Max Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"parameters-to-attributes":{"name":"parameters-to-attributes","displayName":"Parameters to Attributes List","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow POST":{"name":"Allow POST","displayName":"Allow POST","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Hostname":{"name":"Hostname","displayName":"Hostname","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Default URL Character Set":{"name":"Default URL Character Set","displayName":"Default URL Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow DELETE":{"name":"Allow DELETE","displayName":"Allow DELETE","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Header Maximum Size":{"name":"Request Header Maximum Size","displayName":"Request Header Maximum Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Threads":{"name":"Maximum Threads","displayName":"Maximum Threads","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Protocols":{"name":"HTTP Protocols","displayName":"HTTP Protocols","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Additional HTTP Methods":{"name":"Additional HTTP Methods","displayName":"Additional HTTP Methods","identifiesControllerService":false,"sensitive":false,"dynamic":false},"container-queue-size":{"name":"container-queue-size","displayName":"Container Queue Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Context Map":{"name":"HTTP Context Map","displayName":"HTTP Context Map","identifiesControllerService":true,"sensitive":false,"dynamic":false},"multipart-read-buffer-size":{"name":"multipart-read-buffer-size","displayName":"Multipart Read Buffer Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Allow OPTIONS":{"name":"Allow OPTIONS","displayName":"Allow OPTIONS","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allowed Paths":{"name":"Allowed Paths","displayName":"Allowed Paths","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow GET":{"name":"Allow GET","displayName":"Allow GET","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow HEAD":{"name":"Allow HEAD","displayName":"Allow HEAD","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Listening Port":{"name":"Listening Port","displayName":"Listening Port","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Client Authentication":{"name":"Client Authentication","displayName":"Client Authentication","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow PUT":{"name":"Allow PUT","displayName":"Allow PUT","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"cf49a944-9c9d-34a2-ffff-ffffd8b6d403","instanceIdentifier":"36453c2d-e042-3578-b49a-c28fb0f948ac","name":"","source":{"id":"39486a70-513f-337d-ffff-ffffd8b6d403","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"ExecuteStreamCommand","comments":"","instanceIdentifier":"e6658d34-fafe-37dc-81e4-b3efff2935d2"},"destination":{"id":"b9e41c8b-b1e6-3af8-ffff-ffffd8b6d403","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"HandleHttpResponse","comments":"","instanceIdentifier":"7ba67028-e80c-3797-82bd-b410253b333d"},"labelIndex":0,"zIndex":2,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"909639aa-dd03-3868-af95-26cf3d52917b","instanceIdentifier":"f7954c80-de1f-33d4-91e5-1997a9ecc2ef","name":"","source":{"id":"fdeb8bd8-ea33-3dd4-984d-72da86593b40","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"flatten json","comments":"","instanceIdentifier":"2a9f9dc0-5bff-3a7b-a512-39c5cc9ae162"},"destination":{"id":"fd01addb-bb9c-33b1-a167-2d134c636de9","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"embedd generation","comments":"","instanceIdentifier":"0b7174a8-e39d-3273-a73e-e9f6b348d8e6"},"labelIndex":0,"zIndex":3,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"03762bbf-72cc-3b2f-a1c4-0c209f957f8d","instanceIdentifier":"a2649fb1-0197-1000-ffff-ffff95ecf738","name":"","source":{"id":"fd01addb-bb9c-33b1-a167-2d134c636de9","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"embedd generation","comments":"","instanceIdentifier":"0b7174a8-e39d-3273-a73e-e9f6b348d8e6"},"destination":{"id":"71f64684-efe6-3e35-0000-00003bda5ec1","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"insert to elastic","comments":"","instanceIdentifier":"2f2c87bb-b96c-3ccc-be5c-ca8a654c7f8f"},"labelIndex":0,"zIndex":13,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"8ad22673-256a-3bd9-a37a-6a6e7e1cac78","instanceIdentifier":"aad71305-0197-1000-0000-0000398f374f","name":"","source":{"id":"ab0444f8-ffd1-3b22-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"retriever","comments":"","instanceIdentifier":"dac15520-bde9-3b26-a6ea-12806d181a9c"},"destination":{"id":"ff6a5915-b9d3-387f-a3f9-1b7ef939e68b","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"LogAttribute","comments":"","instanceIdentifier":"aad49ab6-0197-1000-0000-00001002b102"},"labelIndex":0,"zIndex":33,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"a83ed8a4-aafe-3f7e-8406-4a4c3944861b","instanceIdentifier":"aad737f6-0197-1000-0000-000063275c68","name":"","source":{"id":"ebc93943-55dc-3bf6-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"HandleHttpResponse","comments":"","instanceIdentifier":"d1654e86-1c3e-3da7-b1d2-370417d66e0f"},"destination":{"id":"ff6a5915-b9d3-387f-a3f9-1b7ef939e68b","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"LogAttribute","comments":"","instanceIdentifier":"aad49ab6-0197-1000-0000-00001002b102"},"labelIndex":0,"zIndex":34,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"3ebb9b79-555d-3375-975f-e82b39819761","instanceIdentifier":"aad5168b-0197-1000-0000-0000351ddbc9","name":"","source":{"id":"860158ea-f801-3845-a36e-6af939e1141c","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"FetchFile","comments":"","instanceIdentifier":"80e16c24-b7e2-3901-9f6c-1685c673ce42"},"destination":{"id":"ff6a5915-b9d3-387f-a3f9-1b7ef939e68b","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"LogAttribute","comments":"","instanceIdentifier":"aad49ab6-0197-1000-0000-00001002b102"},"labelIndex":0,"zIndex":26,"selectedRelationships":["failure","permission.denied","not.found"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"069890c7-676c-3354-8d3b-bb4b3801d92d","instanceIdentifier":"aad56839-0197-1000-0000-00001c64a175","name":"","source":{"id":"fd01addb-bb9c-33b1-a167-2d134c636de9","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"embedd generation","comments":"","instanceIdentifier":"0b7174a8-e39d-3273-a73e-e9f6b348d8e6"},"destination":{"id":"ff6a5915-b9d3-387f-a3f9-1b7ef939e68b","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"LogAttribute","comments":"","instanceIdentifier":"aad49ab6-0197-1000-0000-00001002b102"},"labelIndex":0,"zIndex":28,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"7365ceed-81db-3440-ffff-ffffc6fe85f8","instanceIdentifier":"7098cc8e-0e27-333f-be92-2a40eb787308","name":"","source":{"id":"27fb1124-132e-3861-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"embedd generation","comments":"","instanceIdentifier":"1f68c98b-561c-3f86-82ab-760db9bfb536"},"destination":{"id":"5fe93400-7e92-3a12-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"filter embedding","comments":"","instanceIdentifier":"a254db4b-b4fa-3786-8af8-61371384bd67"},"labelIndex":0,"zIndex":25,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"50d9d52b-a9f1-3ead-ffff-ffffc6fe85f8","instanceIdentifier":"a94ffc95-65e0-3575-b9d8-08a230ef9421","name":"","source":{"id":"4051d608-2b96-3301-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"query_api","comments":"","instanceIdentifier":"82b58b10-f627-348e-bacc-572508a728dd"},"destination":{"id":"57a66c5a-28be-3bdd-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"flatten json","comments":"","instanceIdentifier":"720ecadc-0460-36de-a019-94510567ff76"},"labelIndex":0,"zIndex":24,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"fada4fb2-d900-3593-ffff-ffffc6fe85f8","instanceIdentifier":"ca5c5a22-8922-3d07-b66f-debefb5d0f2d","name":"","source":{"id":"ab0444f8-ffd1-3b22-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"retriever","comments":"","instanceIdentifier":"dac15520-bde9-3b26-a6ea-12806d181a9c"},"destination":{"id":"ebc93943-55dc-3bf6-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"HandleHttpResponse","comments":"","instanceIdentifier":"d1654e86-1c3e-3da7-b1d2-370417d66e0f"},"labelIndex":0,"zIndex":19,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"d503bdde-76f9-342c-b23f-d7458d1a3626","instanceIdentifier":"aad6bd34-0197-1000-ffff-ffffb667a77e","name":"","source":{"id":"57a66c5a-28be-3bdd-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"flatten json","comments":"","instanceIdentifier":"720ecadc-0460-36de-a019-94510567ff76"},"destination":{"id":"ff6a5915-b9d3-387f-a3f9-1b7ef939e68b","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"LogAttribute","comments":"","instanceIdentifier":"aad49ab6-0197-1000-0000-00001002b102"},"labelIndex":0,"zIndex":30,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"9ba7bbbe-2873-3508-ffff-ffffc6fe85f8","instanceIdentifier":"ff485a84-41a5-317a-bc8a-38ed028e9702","name":"","source":{"id":"5fe93400-7e92-3a12-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"filter embedding","comments":"","instanceIdentifier":"a254db4b-b4fa-3786-8af8-61371384bd67"},"destination":{"id":"ab0444f8-ffd1-3b22-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"retriever","comments":"","instanceIdentifier":"dac15520-bde9-3b26-a6ea-12806d181a9c"},"labelIndex":0,"zIndex":23,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"c103f2ea-69d4-337b-a864-423e5a2791c3","instanceIdentifier":"aad6f8b2-0197-1000-0000-000022459395","name":"","source":{"id":"5fe93400-7e92-3a12-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"filter embedding","comments":"","instanceIdentifier":"a254db4b-b4fa-3786-8af8-61371384bd67"},"destination":{"id":"ff6a5915-b9d3-387f-a3f9-1b7ef939e68b","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"LogAttribute","comments":"","instanceIdentifier":"aad49ab6-0197-1000-0000-00001002b102"},"labelIndex":0,"zIndex":32,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"75b957f0-3e07-38ab-ffff-ffffd8b6d403","instanceIdentifier":"78e3523d-5797-3127-8154-f8507c59eeae","name":"","source":{"id":"abc7a5fe-2ff8-316f-ffff-ffffd8b6d403","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"HandleHttpRequest","comments":"","instanceIdentifier":"bf9eacad-1a3d-3b39-acf3-db62b5a4b0f8"},"destination":{"id":"39486a70-513f-337d-ffff-ffffd8b6d403","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"ExecuteStreamCommand","comments":"","instanceIdentifier":"e6658d34-fafe-37dc-81e4-b3efff2935d2"},"labelIndex":0,"zIndex":1,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"017e5191-763d-38b0-b228-e4fbd1968228","instanceIdentifier":"a269840f-0197-1000-0000-00006701d435","name":"","source":{"id":"860158ea-f801-3845-a36e-6af939e1141c","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"FetchFile","comments":"","instanceIdentifier":"80e16c24-b7e2-3901-9f6c-1685c673ce42"},"destination":{"id":"fdeb8bd8-ea33-3dd4-984d-72da86593b40","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"flatten json","comments":"","instanceIdentifier":"2a9f9dc0-5bff-3a7b-a512-39c5cc9ae162"},"labelIndex":0,"zIndex":14,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"1f6cd1ee-3aaf-3fbc-8407-d194a185940c","instanceIdentifier":"aad541b3-0197-1000-ffff-ffffdfdea2df","name":"","source":{"id":"fdeb8bd8-ea33-3dd4-984d-72da86593b40","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"flatten json","comments":"","instanceIdentifier":"2a9f9dc0-5bff-3a7b-a512-39c5cc9ae162"},"destination":{"id":"ff6a5915-b9d3-387f-a3f9-1b7ef939e68b","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"LogAttribute","comments":"","instanceIdentifier":"aad49ab6-0197-1000-0000-00001002b102"},"labelIndex":0,"zIndex":27,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"1acc13c2-7032-361a-9e74-b0c0323b5223","instanceIdentifier":"aad6dba8-0197-1000-0000-00003bb2fe48","name":"","source":{"id":"27fb1124-132e-3861-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"embedd generation","comments":"","instanceIdentifier":"1f68c98b-561c-3f86-82ab-760db9bfb536"},"destination":{"id":"ff6a5915-b9d3-387f-a3f9-1b7ef939e68b","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"LogAttribute","comments":"","instanceIdentifier":"aad49ab6-0197-1000-0000-00001002b102"},"labelIndex":0,"zIndex":31,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"04ab7114-1c37-3c44-9cdf-64323cded1f9","instanceIdentifier":"987d26bd-04c7-3e8d-a99b-92da0558a971","name":"","source":{"id":"e0be79a4-36bb-3f40-8ce8-e0f3ae8a9331","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"ListFile","comments":"","instanceIdentifier":"7a5d8fd4-994a-3c14-b260-b56d9cf604be"},"destination":{"id":"860158ea-f801-3845-a36e-6af939e1141c","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"FetchFile","comments":"","instanceIdentifier":"80e16c24-b7e2-3901-9f6c-1685c673ce42"},"labelIndex":0,"zIndex":1,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"5da3673b-ea09-3193-ffff-ffffc6fe85f8","instanceIdentifier":"e4e3aa4c-e288-3fc5-ac36-eb5bfab198b2","name":"","source":{"id":"57a66c5a-28be-3bdd-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"flatten json","comments":"","instanceIdentifier":"720ecadc-0460-36de-a019-94510567ff76"},"destination":{"id":"27fb1124-132e-3861-ffff-ffffc6fe85f8","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"embedd generation","comments":"","instanceIdentifier":"1f68c98b-561c-3f86-82ab-760db9bfb536"},"labelIndex":0,"zIndex":3,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"},{"identifier":"869a98ca-3879-30e4-a44f-ec4f39e24c5b","instanceIdentifier":"aad5822e-0197-1000-ffff-ffffc541a385","name":"","source":{"id":"71f64684-efe6-3e35-0000-00003bda5ec1","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"insert to elastic","comments":"","instanceIdentifier":"2f2c87bb-b96c-3ccc-be5c-ca8a654c7f8f"},"destination":{"id":"ff6a5915-b9d3-387f-a3f9-1b7ef939e68b","type":"PROCESSOR","groupId":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b","name":"LogAttribute","comments":"","instanceIdentifier":"aad49ab6-0197-1000-0000-00001002b102"},"labelIndex":0,"zIndex":29,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"1d34c7a7-87a4-3995-8ce4-d96adaf8145b"}],"labels":[],"funnels":[],"controllerServices":[],"parameterContextName":"Embeddings","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"13764443-048a-35e4-9c03-33a02a70ece2"},{"identifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5","instanceIdentifier":"c4d4bd4a-0197-1000-ffff-ffffe88ec47e","name":"hybrid search","comments":"","position":{"x":-144.0,"y":-1008.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"a826e6f2-1115-3e01-0000-0000634c4f61","instanceIdentifier":"6368ceb7-8dbe-3bb4-aa8a-eba6cddba384","name":"filter embedding","comments":"","position":{"x":400.0,"y":-1192.0},"type":"org.apache.nifi.processors.groovyx.ExecuteGroovyScript","bundle":{"group":"org.apache.nifi","artifact":"nifi-groovyx-nar","version":"2.4.0"},"properties":{"groovyx-script-body":"import org.apache.nifi.processor.io.StreamCallback\nimport java.nio.charset.StandardCharsets\nimport org.apache.commons.io.IOUtils\nimport groovy.json.JsonSlurper\nimport groovy.json.JsonOutput\n\ndef flowFile = session.get()\nif (!flowFile) return\n\nflowFile = session.write(flowFile, { inputStream, outputStream ->\n    def input = IOUtils.toString(inputStream, StandardCharsets.UTF_8)\n    def json = new JsonSlurper().parseText(input)\n\n    // Extract embedding array\n    def embeddingArray = json[\"embedding\"]\n\n    // Create output JSON\n    def outputJson = [query_vector: embeddingArray]\n    outputStream.write(JsonOutput.toJson(outputJson).getBytes(StandardCharsets.UTF_8))\n} as StreamCallback)\n\nsession.transfer(flowFile, REL_SUCCESS)\n","groovyx-failure-strategy":"rollback","groovyx-additional-classpath":null,"groovyx-script-file":null},"propertyDescriptors":{"groovyx-script-body":{"name":"groovyx-script-body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-failure-strategy":{"name":"groovyx-failure-strategy","displayName":"Failure strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-additional-classpath":{"name":"groovyx-additional-classpath","displayName":"Additional classpath","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-script-file":{"name":"groovyx-script-file","displayName":"Script File","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["FILE"]}}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"c51bb39b-8d24-329e-0000-0000634c4f61","instanceIdentifier":"a6b0dc07-9e15-3e0a-8291-fe4594b2d0a9","name":"retriever","comments":"","position":{"x":392.0,"y":-1040.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":null,"Working Directory":"/home/nifi/nifi2/users/yogesh/codes","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/codes/retrieve.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","nonzero status"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"745cac7b-9197-3612-0000-0000634c4f61","instanceIdentifier":"af02d533-68cf-379d-b180-5faa4f7f930d","name":"flatten json","comments":"","position":{"x":392.0,"y":-1528.0},"type":"org.apache.nifi.processors.groovyx.ExecuteGroovyScript","bundle":{"group":"org.apache.nifi","artifact":"nifi-groovyx-nar","version":"2.4.0"},"properties":{"groovyx-script-body":"import groovy.json.JsonSlurper\nimport groovy.json.JsonOutput\nimport org.apache.commons.io.IOUtils\nimport java.nio.charset.StandardCharsets\nimport java.io.InputStream\nimport java.io.OutputStream\nimport java.io.IOException\nimport org.apache.nifi.processor.io.InputStreamCallback\nimport org.apache.nifi.processor.io.OutputStreamCallback\n\ndef flowFile = session.get()\nif (!flowFile) return\n\ntry {\n    def content = ''\n\n    // Read JSON input from FlowFile content\n    session.read(flowFile, new InputStreamCallback() {\n        @Override\n        void process(InputStream inputStream) throws IOException {\n            content = IOUtils.toString(inputStream, StandardCharsets.UTF_8)\n        }\n    })\n\n    if (!content?.trim()) throw new IllegalArgumentException(\"FlowFile content is empty\")\n\n    def parsed = new JsonSlurper().parseText(content.trim())\n    if (!(parsed instanceof List)) {\n        parsed = [parsed]  // Convert to list if single JSON object\n    }\n\n    parsed.eachWithIndex { doc, idx ->\n        def name = doc['name']?.toString()?.replaceAll(\"\\\\s+\", \"_\") ?: \"unknown\"\n        def empId = doc['employee_id']?.toString() ?: idx.toString()\n        def filename = \"${empId}_${name}.txt\"\n        def outputJson = JsonOutput.toJson([\n            filename: filename,\n            text: doc.toString()\n        ])\n\n        def ff = session.create(flowFile)\n        session.write(ff, new OutputStreamCallback() {\n            @Override\n            void process(OutputStream out) throws IOException {\n                out.write(JsonOutput.prettyPrint(outputJson).getBytes(StandardCharsets.UTF_8))\n            }\n        })\n\n        session.transfer(ff, REL_SUCCESS)\n    }\n\n    session.remove(flowFile)\n\n} catch (Exception e) {\n    log.error(\"ExecuteScript Error: ${e.message}\", e)\n    session.transfer(flowFile, REL_FAILURE)\n}\n","groovyx-failure-strategy":"rollback","groovyx-additional-classpath":null,"groovyx-script-file":null},"propertyDescriptors":{"groovyx-script-body":{"name":"groovyx-script-body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-failure-strategy":{"name":"groovyx-failure-strategy","displayName":"Failure strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-additional-classpath":{"name":"groovyx-additional-classpath","displayName":"Additional classpath","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-script-file":{"name":"groovyx-script-file","displayName":"Script File","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["FILE"]}}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"dbf381a6-84ae-39ef-0000-0000634c4f61","instanceIdentifier":"3aac0ef4-17e3-3026-bfb6-32cabfc155cd","name":"HandleHttpResponse","comments":"","position":{"x":72.0,"y":-632.0},"type":"org.apache.nifi.processors.standard.HandleHttpResponse","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"HTTP Context Map":"992a5dba-e5e2-399e-a8a1-07d5d5d9911b","Attributes to add to the HTTP Response (Regex)":null,"HTTP Status Code":"200"},"propertyDescriptors":{"HTTP Context Map":{"name":"HTTP Context Map","displayName":"HTTP Context Map","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Attributes to add to the HTTP Response (Regex)":{"name":"Attributes to add to the HTTP Response (Regex)","displayName":"Attributes to add to the HTTP Response (Regex)","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Status Code":{"name":"HTTP Status Code","displayName":"HTTP Status Code","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"baf0ff91-d298-3a93-0000-0000634c4f61","instanceIdentifier":"151d9241-1d4b-3aca-8321-87b81f78d78c","name":"ExecuteStreamCommand","comments":"","position":{"x":-112.0,"y":-1248.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":null,"Working Directory":"/home/nifi/nifi2/users/yogesh/codes","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/codes/keyword_search.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","nonzero status"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"b4d096fa-a138-3b4c-0000-0000634c4f61","instanceIdentifier":"558fa834-a5e8-3568-bfbb-fb489891da18","name":"ExecuteGroovyScript","comments":"","position":{"x":96.0,"y":-848.0},"type":"org.apache.nifi.processors.groovyx.ExecuteGroovyScript","bundle":{"group":"org.apache.nifi","artifact":"nifi-groovyx-nar","version":"2.4.0"},"properties":{"groovyx-script-body":"import groovy.json.JsonSlurper\nimport groovy.json.JsonOutput\n\ndef ff1 = session.get()\nif (!ff1) return\ndef ff2 = session.get()\nif (!ff2) {\n    session.transfer(ff1, REL_FAILURE)\n    return\n}\n\ndef content1 = new StringBuilder()\ndef content2 = new StringBuilder()\nff1.read().withReader(\"UTF-8\") { reader -> content1.append(reader.text) }\nff2.read().withReader(\"UTF-8\") { reader -> content2.append(reader.text) }\n\ndef keywordJson, vectorText\ndef jsonFF, textFF\n\ntry {\n    keywordJson = new JsonSlurper().parseText(content1.toString())\n    vectorText = content2.toString()\n    jsonFF = ff1\n    textFF = ff2\n} catch (Exception e1) {\n    try {\n        keywordJson = new JsonSlurper().parseText(content2.toString())\n        vectorText = content1.toString()\n        jsonFF = ff2\n        textFF = ff1\n    } catch (Exception e2) {\n        log.error(\"Neither input is valid JSON.\")\n        session.transfer(ff1, REL_FAILURE)\n        session.transfer(ff2, REL_FAILURE)\n        return\n    }\n}\n\n// Parse vector result lines (multi-line text support)\ndef vectorResults = []\ndef lines = vectorText.readLines()\ndef current = [:]\ndef textBuffer = new StringBuilder()\nboolean inText = false\n\nlines.each { line ->\n    if (line.startsWith(\"Score:\")) {\n        if (current.filename && textBuffer.length() > 0) {\n            current.text = textBuffer.toString().trim()\n            vectorResults << current\n            current = [:]\n            textBuffer.setLength(0)\n        }\n        current.score = line.replace(\"Score:\", \"\").trim().toFloat()\n        inText = false\n    } else if (line.startsWith(\"Filename:\")) {\n        current.filename = line.replace(\"Filename:\", \"\").trim()\n        inText = false\n    } else if (line.startsWith(\"Text:\")) {\n        textBuffer.setLength(0)\n        textBuffer.append(line.replace(\"Text:\", \"\").trim()).append(\"\\n\")\n        inText = true\n    } else if (inText) {\n        textBuffer.append(line).append(\"\\n\")\n    }\n}\n// Add last entry\nif (current.filename && textBuffer.length() > 0) {\n    current.text = textBuffer.toString().trim()\n    vectorResults << current\n}\n\n// Merge keyword and vector results\ndef merged = [:]\nkeywordJson.results.each { r ->\n    def name = r.filename.trim()\n    merged[name] = [\n        filename: name,\n        text: r.text,\n        keywordScore: r.score ?: 1.0,\n        vectorScore: 0.0\n    ]\n}\n\nvectorResults.each { v ->\n    def name = v.filename.trim()\n    if (merged.containsKey(name)) {\n        merged[name].vectorScore = v.score\n    } else {\n        merged[name] = [\n            filename: name,\n            text: v.text,\n            keywordScore: 0.0,\n            vectorScore: v.score\n        ]\n    }\n}\n\n// Compute hybrid score\ndef results = merged.values().collect { doc ->\n    doc.hybridScore = (0.7 * doc.keywordScore + 0.3 * doc.vectorScore).round(3)\n    return doc\n}.sort { -it.hybridScore }\n\n// Output JSON\ndef outputJson = JsonOutput.prettyPrint(JsonOutput.toJson([results: results]))\n\n// Write to keyword flow file\ndef updatedFF = session.write(jsonFF, { out ->\n    out.write(outputJson.getBytes(\"UTF-8\"))\n} as OutputStreamCallback)\n\n// Send final hybrid merged result to success\nsession.transfer(updatedFF, REL_SUCCESS)\n\n// Drop the other flow file\nsession.remove(textFF)\n","groovyx-failure-strategy":"rollback","groovyx-additional-classpath":null,"groovyx-script-file":null},"propertyDescriptors":{"groovyx-script-body":{"name":"groovyx-script-body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-failure-strategy":{"name":"groovyx-failure-strategy","displayName":"Failure strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-additional-classpath":{"name":"groovyx-additional-classpath","displayName":"Additional classpath","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-script-file":{"name":"groovyx-script-file","displayName":"Script File","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["FILE"]}}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"a9102deb-e5c4-3e04-822f-624147350270","instanceIdentifier":"cc8cdc8b-0197-1000-0000-000052f82057","name":"ExecuteGroovyScript","comments":"","position":{"x":-112.0,"y":-1472.0},"type":"org.apache.nifi.processors.groovyx.ExecuteGroovyScript","bundle":{"group":"org.apache.nifi","artifact":"nifi-groovyx-nar","version":"2.4.0"},"properties":{"groovyx-script-body":"import org.apache.nifi.processor.io.InputStreamCallback\nimport org.apache.nifi.processor.io.OutputStreamCallback\nimport java.nio.charset.StandardCharsets\nimport groovy.json.JsonOutput\nimport groovy.json.JsonSlurper\nimport java.net.URL\nimport java.net.HttpURLConnection\n\nflowFile = session.get()\nif (!flowFile) return\n\ndef queryText = new StringBuilder()\n\n// Read input (query) from FlowFile\nsession.read(flowFile, { inputStream ->\n    queryText.append(inputStream.getText(StandardCharsets.UTF_8.name()))\n} as InputStreamCallback)\n\ndef input = queryText.toString().trim()\n\n// Call OpenAI API using Java URLConnection\ndef apiKey = 'your api key'\ndef endpoint = 'https://us-tax-law-rag-demo.openai.azure.com/openai/deployments/gpt-4o-mini/chat/completions?api-version=2024-08-01-preview'\n\ndef requestBody = JsonOutput.toJson([\n    messages: [\n        [role: \"system\", content: \"Extract only skill names and person names from the user's query. Ignore generic words like 'resume', 'profile', or 'CV'. Return the result as comma-separated values.\"],\n        [role: \"user\", content: input]\n    ],\n    max_tokens: 50,\n    temperature: 0.2\n])\n\ndef connection = new URL(endpoint).openConnection() as HttpURLConnection\nconnection.setRequestMethod(\"POST\")\nconnection.setRequestProperty(\"Content-Type\", \"application/json\")\nconnection.setRequestProperty(\"api-key\", apiKey)\nconnection.setDoOutput(true)\nconnection.outputStream.withWriter(\"UTF-8\") { it.write(requestBody) }\n\ndef responseText = connection.inputStream.getText(\"UTF-8\")\ndef responseJson = new JsonSlurper().parseText(responseText)\ndef keywordString = responseJson.choices[0].message.content.trim()\n\n// Convert comma-separated to space-separated keywords\ndef spaceSeparatedKeywords = keywordString.replaceAll(\",\", \" \").replaceAll(\"\\\\s+\", \" \").trim()\n\n// Create final JSON\ndef finalJsonOutput = JsonOutput.toJson([query: spaceSeparatedKeywords])\n\n// Write output to FlowFile\nflowFile = session.write(flowFile, { outputStream ->\n    outputStream.write(finalJsonOutput.getBytes(StandardCharsets.UTF_8))\n} as OutputStreamCallback)\n\n// Optional: Set keyword attribute\nflowFile = session.putAttribute(flowFile, \"keywords\", spaceSeparatedKeywords)\n\nsession.transfer(flowFile, REL_SUCCESS)\n","groovyx-failure-strategy":"rollback","groovyx-additional-classpath":null,"groovyx-script-file":null},"propertyDescriptors":{"groovyx-script-body":{"name":"groovyx-script-body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-failure-strategy":{"name":"groovyx-failure-strategy","displayName":"Failure strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-additional-classpath":{"name":"groovyx-additional-classpath","displayName":"Additional classpath","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-script-file":{"name":"groovyx-script-file","displayName":"Script File","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["FILE"]}}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"c62451b8-2103-3767-0000-0000634c4f61","instanceIdentifier":"57af98fc-36b9-3920-aa72-4a30ea7887e4","name":"query_api","comments":"","position":{"x":120.0,"y":-1696.0},"type":"org.apache.nifi.processors.standard.HandleHttpRequest","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"multipart-request-max-size":"1 MB","parameters-to-attributes":null,"Allow POST":"true","Hostname":"0.0.0.0","Default URL Character Set":"UTF-8","Allow DELETE":"true","Request Header Maximum Size":"8 KB","Maximum Threads":"200","HTTP Protocols":"HTTP_1_1","Additional HTTP Methods":null,"container-queue-size":"50","HTTP Context Map":"992a5dba-e5e2-399e-a8a1-07d5d5d9911b","multipart-read-buffer-size":"512 KB","SSL Context Service":null,"Allow OPTIONS":"false","Allowed Paths":"/search_candidates","Allow GET":"true","Allow HEAD":"false","Listening Port":"8083","Client Authentication":"No Authentication","Allow PUT":"true"},"propertyDescriptors":{"multipart-request-max-size":{"name":"multipart-request-max-size","displayName":"Multipart Request Max Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"parameters-to-attributes":{"name":"parameters-to-attributes","displayName":"Parameters to Attributes List","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow POST":{"name":"Allow POST","displayName":"Allow POST","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Hostname":{"name":"Hostname","displayName":"Hostname","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Default URL Character Set":{"name":"Default URL Character Set","displayName":"Default URL Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow DELETE":{"name":"Allow DELETE","displayName":"Allow DELETE","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Header Maximum Size":{"name":"Request Header Maximum Size","displayName":"Request Header Maximum Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Threads":{"name":"Maximum Threads","displayName":"Maximum Threads","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Protocols":{"name":"HTTP Protocols","displayName":"HTTP Protocols","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Additional HTTP Methods":{"name":"Additional HTTP Methods","displayName":"Additional HTTP Methods","identifiesControllerService":false,"sensitive":false,"dynamic":false},"container-queue-size":{"name":"container-queue-size","displayName":"Container Queue Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Context Map":{"name":"HTTP Context Map","displayName":"HTTP Context Map","identifiesControllerService":true,"sensitive":false,"dynamic":false},"multipart-read-buffer-size":{"name":"multipart-read-buffer-size","displayName":"Multipart Read Buffer Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Allow OPTIONS":{"name":"Allow OPTIONS","displayName":"Allow OPTIONS","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allowed Paths":{"name":"Allowed Paths","displayName":"Allowed Paths","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow GET":{"name":"Allow GET","displayName":"Allow GET","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow HEAD":{"name":"Allow HEAD","displayName":"Allow HEAD","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Listening Port":{"name":"Listening Port","displayName":"Listening Port","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Client Authentication":{"name":"Client Authentication","displayName":"Client Authentication","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow PUT":{"name":"Allow PUT","displayName":"Allow PUT","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"b9b6e8cc-f194-33ac-0000-0000634c4f61","instanceIdentifier":"9db79746-c379-30b1-8f7e-784ed2661381","name":"embedd generation","comments":"","position":{"x":400.0,"y":-1360.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"AWS_REGION":"us-west-2","argumentsStrategy":"Command Arguments Property","Working Directory":"/home/nifi/nifi2/users/yogesh/codes","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/codes/embedding.py","Max Attribute Length":"256","Output MIME Type":null,"Output Destination Attribute":null,"EMBEDDING_PROVIDER":"azure","EMBEDDING_MODEL":"text-embedding-ada-002","AZURE_OPENAI_EMBEDDING_MODEL":"text-embedding-ada-002"},"propertyDescriptors":{"AWS_REGION":{"name":"AWS_REGION","displayName":"AWS_REGION","identifiesControllerService":false,"sensitive":false,"dynamic":true},"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"AZURE_OPENAI_KEY":{"name":"AZURE_OPENAI_KEY","displayName":"AZURE_OPENAI_KEY","identifiesControllerService":false,"sensitive":true,"dynamic":true},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false},"AZURE_OPENAI_ENDPOINT":{"name":"AZURE_OPENAI_ENDPOINT","displayName":"AZURE_OPENAI_ENDPOINT","identifiesControllerService":false,"sensitive":true,"dynamic":true},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"EMBEDDING_PROVIDER":{"name":"EMBEDDING_PROVIDER","displayName":"EMBEDDING_PROVIDER","identifiesControllerService":false,"sensitive":false,"dynamic":true},"EMBEDDING_MODEL":{"name":"EMBEDDING_MODEL","displayName":"EMBEDDING_MODEL","identifiesControllerService":false,"sensitive":false,"dynamic":true},"AZURE_OPENAI_EMBEDDING_MODEL":{"name":"AZURE_OPENAI_EMBEDDING_MODEL","displayName":"AZURE_OPENAI_EMBEDDING_MODEL","identifiesControllerService":false,"sensitive":false,"dynamic":true},"AZURE_OPENAI_API_VERSION":{"name":"AZURE_OPENAI_API_VERSION","displayName":"AZURE_OPENAI_API_VERSION","identifiesControllerService":false,"sensitive":true,"dynamic":true}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","nonzero status"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"98981ce2-dd26-3e36-a4ce-6e547a58346d","instanceIdentifier":"cc9b729a-0197-1000-0000-00006fe03e7d","name":"","source":{"id":"a9102deb-e5c4-3e04-822f-624147350270","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"ExecuteGroovyScript","comments":"","instanceIdentifier":"cc8cdc8b-0197-1000-0000-000052f82057"},"destination":{"id":"baf0ff91-d298-3a93-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"ExecuteStreamCommand","comments":"","instanceIdentifier":"151d9241-1d4b-3aca-8321-87b81f78d78c"},"labelIndex":0,"zIndex":42,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"b123e8f7-b09a-3c14-0000-0000634c4f61","instanceIdentifier":"5a2fb9ec-f99d-385f-9485-bcdfb31c5df1","name":"","source":{"id":"b4d096fa-a138-3b4c-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"ExecuteGroovyScript","comments":"","instanceIdentifier":"558fa834-a5e8-3568-bfbb-fb489891da18"},"destination":{"id":"dbf381a6-84ae-39ef-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"HandleHttpResponse","comments":"","instanceIdentifier":"3aac0ef4-17e3-3026-bfb6-32cabfc155cd"},"labelIndex":0,"zIndex":29,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"c79c77b0-edb4-380c-87e6-23a7b2fe7c7f","instanceIdentifier":"cab80c4f-0197-1000-0000-0000044d9a1b","name":"","source":{"id":"baf0ff91-d298-3a93-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"ExecuteStreamCommand","comments":"","instanceIdentifier":"151d9241-1d4b-3aca-8321-87b81f78d78c"},"destination":{"id":"b4d096fa-a138-3b4c-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"ExecuteGroovyScript","comments":"","instanceIdentifier":"558fa834-a5e8-3568-bfbb-fb489891da18"},"labelIndex":0,"zIndex":33,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"483954ae-379f-37c4-0000-0000634c4f61","instanceIdentifier":"dfbad1f5-f3d7-35f2-9e15-a08037264035","name":"","source":{"id":"745cac7b-9197-3612-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"flatten json","comments":"","instanceIdentifier":"af02d533-68cf-379d-b180-5faa4f7f930d"},"destination":{"id":"b9b6e8cc-f194-33ac-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"embedd generation","comments":"","instanceIdentifier":"9db79746-c379-30b1-8f7e-784ed2661381"},"labelIndex":0,"zIndex":3,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"4ca0c3a4-247e-36f1-9fef-3fbbcda54502","instanceIdentifier":"cc8cf1ed-0197-1000-ffff-ffffa5cbf786","name":"","source":{"id":"c62451b8-2103-3767-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"query_api","comments":"","instanceIdentifier":"57af98fc-36b9-3920-aa72-4a30ea7887e4"},"destination":{"id":"a9102deb-e5c4-3e04-822f-624147350270","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"ExecuteGroovyScript","comments":"","instanceIdentifier":"cc8cdc8b-0197-1000-0000-000052f82057"},"labelIndex":0,"zIndex":41,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"f90c05f8-9e67-38f7-9a9c-2ec69155f199","instanceIdentifier":"cab83557-0197-1000-0000-000050b83578","name":"","source":{"id":"c51bb39b-8d24-329e-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"retriever","comments":"","instanceIdentifier":"a6b0dc07-9e15-3e0a-8291-fe4594b2d0a9"},"destination":{"id":"b4d096fa-a138-3b4c-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"ExecuteGroovyScript","comments":"","instanceIdentifier":"558fa834-a5e8-3568-bfbb-fb489891da18"},"labelIndex":0,"zIndex":34,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"ea422a9c-8f76-36a2-0000-0000634c4f61","instanceIdentifier":"93785aea-9b8a-322b-87b2-5fb315aa25e4","name":"","source":{"id":"b9b6e8cc-f194-33ac-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"embedd generation","comments":"","instanceIdentifier":"9db79746-c379-30b1-8f7e-784ed2661381"},"destination":{"id":"a826e6f2-1115-3e01-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"filter embedding","comments":"","instanceIdentifier":"6368ceb7-8dbe-3bb4-aa8a-eba6cddba384"},"labelIndex":0,"zIndex":25,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"b4073b96-e09e-3032-0000-0000634c4f61","instanceIdentifier":"7df4aa7c-7d43-3d8a-935c-ea17a3b61112","name":"","source":{"id":"c62451b8-2103-3767-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"query_api","comments":"","instanceIdentifier":"57af98fc-36b9-3920-aa72-4a30ea7887e4"},"destination":{"id":"745cac7b-9197-3612-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"flatten json","comments":"","instanceIdentifier":"af02d533-68cf-379d-b180-5faa4f7f930d"},"labelIndex":0,"zIndex":24,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"},{"identifier":"0460aed3-472f-3f00-0000-0000634c4f61","instanceIdentifier":"44a2026b-21ea-35cd-9044-7badcf6dd1c9","name":"","source":{"id":"a826e6f2-1115-3e01-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"filter embedding","comments":"","instanceIdentifier":"6368ceb7-8dbe-3bb4-aa8a-eba6cddba384"},"destination":{"id":"c51bb39b-8d24-329e-0000-0000634c4f61","type":"PROCESSOR","groupId":"4450612d-1679-3acb-b881-5fbd1aacd4e5","name":"retriever","comments":"","instanceIdentifier":"a6b0dc07-9e15-3e0a-8291-fe4594b2d0a9"},"labelIndex":0,"zIndex":23,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"4450612d-1679-3acb-b881-5fbd1aacd4e5"}],"labels":[],"funnels":[],"controllerServices":[],"parameterContextName":"Embeddings","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"13764443-048a-35e4-9c03-33a02a70ece2"},{"identifier":"94de7944-94fa-3676-8c90-8b75feccc497","instanceIdentifier":"d49c6ebc-0197-1000-0000-0000547bf584","name":"embedding for json with skill","comments":"","position":{"x":-144.0,"y":-808.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"5cbb9076-0065-37fe-ffff-ffffcfb765bc","instanceIdentifier":"02d65b03-4743-39ac-b0f6-77fe393a74ea","name":"retriever","comments":"","position":{"x":-440.0,"y":-344.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":null,"Working Directory":"/home/nifi/nifi2/users/yogesh/code","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/code/retriever2.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"61ce1911-5692-3101-0000-0000439a57a9","instanceIdentifier":"3bc78dee-043f-315d-a40b-2debf3cc4b44","name":"insert to elastic","comments":"","position":{"x":-1449.774763346388,"y":-339.61428842342457},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":null,"Working Directory":"/home/nifi/nifi2/users/yogesh/code","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/code/insert.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"183e298a-4884-3cc6-0000-0000439a57a9","instanceIdentifier":"bc7cda03-2993-38ee-bb0d-619e08dfff2f","name":"FetchFile","comments":"","position":{"x":-1441.774763346388,"y":-843.6142884234246},"type":"org.apache.nifi.processors.standard.FetchFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"Move Conflict Strategy":"Rename","Log level when file not found":"ERROR","Move Destination Directory":null,"Log level when permission denied":"ERROR","File to Fetch":"${absolute.path}/${filename}","Completion Strategy":"None"},"propertyDescriptors":{"Move Conflict Strategy":{"name":"Move Conflict Strategy","displayName":"Move Conflict Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Log level when file not found":{"name":"Log level when file not found","displayName":"Log level when file not found","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Move Destination Directory":{"name":"Move Destination Directory","displayName":"Move Destination Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Log level when permission denied":{"name":"Log level when permission denied","displayName":"Log level when permission denied","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File to Fetch":{"name":"File to Fetch","displayName":"File to Fetch","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Completion Strategy":{"name":"Completion Strategy","displayName":"Completion Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"e1223dbc-b4dc-37c8-0000-00002ad23294","instanceIdentifier":"7effe7b3-dd9f-3936-93d4-18bf76127b2d","name":"ExecuteGroovyScript","comments":"","position":{"x":-448.0,"y":-872.0},"type":"org.apache.nifi.processors.groovyx.ExecuteGroovyScript","bundle":{"group":"org.apache.nifi","artifact":"nifi-groovyx-nar","version":"2.4.0"},"properties":{"groovyx-script-body":"import org.apache.nifi.processor.io.InputStreamCallback\nimport org.apache.nifi.processor.io.OutputStreamCallback\nimport java.nio.charset.StandardCharsets\nimport groovy.json.JsonOutput\nimport groovy.json.JsonSlurper\nimport java.net.URL\nimport java.net.HttpURLConnection\n\ndef flowFile = session.get()\nif (!flowFile) return\n\ndef queryText = new StringBuilder()\n\n// Step 1: Read input JSON from FlowFile and extract just the 'query' string\nsession.read(flowFile, { inputStream ->\n    def rawInput = inputStream.getText(StandardCharsets.UTF_8.name())\n    def parsedInput = new JsonSlurper().parseText(rawInput)\n    queryText.append(parsedInput.query?.toString()?.trim())\n} as InputStreamCallback)\n\ndef input = queryText.toString()\n\n// Step 2: Call OpenAI API using Java URLConnection\ndef apiKey = 'Yor api key'\ndef endpoint = 'https://us-tax-law-rag-demo.openai.azure.com/openai/deployments/gpt-4o-mini/chat/completions?api-version=2024-08-01-preview'\n\ndef requestBody = JsonOutput.toJson([\n    messages: [\n        [role: \"system\", content: \"Extract only skill names and person names from the user's query. Ignore generic words like 'resume', 'profile', or 'CV'. Return the result as comma-separated values.\"],\n        [role: \"user\", content: input]\n    ],\n    max_tokens: 50,\n    temperature: 0.2\n])\n\ndef connection = new URL(endpoint).openConnection() as HttpURLConnection\nconnection.setRequestMethod(\"POST\")\nconnection.setRequestProperty(\"Content-Type\", \"application/json\")\nconnection.setRequestProperty(\"api-key\", apiKey)\nconnection.setDoOutput(true)\nconnection.outputStream.withWriter(\"UTF-8\") { it.write(requestBody) }\n\ndef responseText = connection.inputStream.getText(\"UTF-8\")\ndef responseJson = new JsonSlurper().parseText(responseText)\ndef keywordString = responseJson.choices[0].message.content.trim()\n\n// Clean skills: convert comma-separated to space-separated and normalize spaces\ndef skills = keywordString.replaceAll(\",\", \" \").replaceAll(\"\\\\s+\", \" \").trim()\n\n// Step 3: Create final clean output JSON\ndef finalJsonOutput = JsonOutput.toJson([\n    skills: skills,\n    query: input\n])\n\n// Step 4: Write back to FlowFile\nflowFile = session.write(flowFile, { outputStream ->\n    outputStream.write(finalJsonOutput.getBytes(StandardCharsets.UTF_8))\n} as OutputStreamCallback)\n\n// Optional: Set skill keywords as FlowFile attribute\nflowFile = session.putAttribute(flowFile, \"keywords\", skills)\n\nsession.transfer(flowFile, REL_SUCCESS)\n","groovyx-failure-strategy":"rollback","groovyx-additional-classpath":null,"groovyx-script-file":null},"propertyDescriptors":{"groovyx-script-body":{"name":"groovyx-script-body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-failure-strategy":{"name":"groovyx-failure-strategy","displayName":"Failure strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-additional-classpath":{"name":"groovyx-additional-classpath","displayName":"Additional classpath","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-script-file":{"name":"groovyx-script-file","displayName":"Script File","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["FILE"]}}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"ccc0d214-629a-3d9f-0000-0000003f1405","instanceIdentifier":"3698c1b0-2029-31f9-8763-3ddf8060dd25","name":"retriever","comments":"","position":{"x":-456.0,"y":-528.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":null,"Working Directory":"/home/nifi/nifi2/users/yogesh/code","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/code/retriever.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"3b38cf51-13f2-3650-0000-0000439a57a9","instanceIdentifier":"96526ad9-6511-3e40-9f37-96bf1eeb2f81","name":"flatten json","comments":"","position":{"x":-1441.774763346388,"y":-667.6142884234246},"type":"org.apache.nifi.processors.groovyx.ExecuteGroovyScript","bundle":{"group":"org.apache.nifi","artifact":"nifi-groovyx-nar","version":"2.4.0"},"properties":{"groovyx-script-body":"import groovy.json.JsonSlurper\nimport groovy.json.JsonOutput\nimport org.apache.nifi.processor.io.*\nimport java.nio.charset.StandardCharsets\n\n// Recursive flattener\ndef flattenMap(map, prefix = '', collector = []) {\n    map.each { k, v ->\n        def key = prefix ? \"${prefix}.${k}\" : \"${k}\"\n        if (v instanceof Map) {\n            flattenMap(v, key, collector)\n        } else if (v instanceof List) {\n            v.eachWithIndex { item, i ->\n                flattenMap([(i): item], key, collector)\n            }\n        } else {\n            collector << \"${key}=${v}\"\n        }\n    }\n    return collector\n}\n\nflowFile = session.get()\nif (!flowFile) return\n\nflowFile = session.write(flowFile, { inputStream, outputStream ->\n\n    def json = new JsonSlurper().parse(inputStream)\n    def employeeId = json.employee_id ?: \"unknown\"\n    def filename = \"${employeeId}.txt\"\n\n    def flattenedList = flattenMap(json)\n    def textField = \"{\" + flattenedList.join(\", \") + \"}\"\n\n    def skillsStr = (json.skills ?: []).join(\", \")\n\n    def outputJson = [\n        filename: filename,\n        text    : textField,\n        skills  : skillsStr\n    ]\n\n    def resultStr = JsonOutput.toJson(outputJson)\n    outputStream.write(resultStr.getBytes(StandardCharsets.UTF_8))\n\n} as StreamCallback)\n\nsession.transfer(flowFile, REL_SUCCESS)\n","groovyx-failure-strategy":"rollback","groovyx-additional-classpath":null,"groovyx-script-file":null},"propertyDescriptors":{"groovyx-script-body":{"name":"groovyx-script-body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-failure-strategy":{"name":"groovyx-failure-strategy","displayName":"Failure strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-additional-classpath":{"name":"groovyx-additional-classpath","displayName":"Additional classpath","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-script-file":{"name":"groovyx-script-file","displayName":"Script File","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["FILE"]}}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"e2e4c4f7-3dc3-3c8c-0000-0000439a57a9","instanceIdentifier":"72139050-11ac-3433-b7ea-54236dd977b4","name":"ListFile","comments":"","position":{"x":-1441.774763346388,"y":-1019.6142884234246},"type":"org.apache.nifi.processors.standard.ListFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"Minimum File Age":"0 sec","et-initial-listing-target":"all","Maximum File Age":null,"max-listing-time":"3 mins","record-writer":null,"Maximum File Size":null,"et-time-window":"3 hours","et-node-identifier":"${hostname()}","Recurse Subdirectories":"true","File Filter":"[^\\.].*","Path Filter":null,"Include File Attributes":"true","Input Directory Location":"Local","listing-strategy":"timestamps","Input Directory":"/home/nifi/nifi2/users/yogesh/inputs/re/","target-system-timestamp-precision":"auto-detect","track-performance":"false","max-performance-metrics":"100000","Minimum File Size":"0 B","Ignore Hidden Files":"true","et-state-cache":null,"max-operation-time":"10 secs"},"propertyDescriptors":{"Minimum File Age":{"name":"Minimum File Age","displayName":"Minimum File Age","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-initial-listing-target":{"name":"et-initial-listing-target","displayName":"Entity Tracking Initial Listing Target","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Age":{"name":"Maximum File Age","displayName":"Maximum File Age","identifiesControllerService":false,"sensitive":false,"dynamic":false},"max-listing-time":{"name":"max-listing-time","displayName":"Max Directory Listing Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"record-writer":{"name":"record-writer","displayName":"Record Writer","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Maximum File Size":{"name":"Maximum File Size","displayName":"Maximum File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-time-window":{"name":"et-time-window","displayName":"Entity Tracking Time Window","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-node-identifier":{"name":"et-node-identifier","displayName":"Entity Tracking Node Identifier","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Recurse Subdirectories":{"name":"Recurse Subdirectories","displayName":"Recurse Subdirectories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Filter":{"name":"File Filter","displayName":"File Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Path Filter":{"name":"Path Filter","displayName":"Path Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Include File Attributes":{"name":"Include File Attributes","displayName":"Include File Attributes","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Input Directory Location":{"name":"Input Directory Location","displayName":"Input Directory Location","identifiesControllerService":false,"sensitive":false,"dynamic":false},"listing-strategy":{"name":"listing-strategy","displayName":"Listing Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Input Directory":{"name":"Input Directory","displayName":"Input Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"target-system-timestamp-precision":{"name":"target-system-timestamp-precision","displayName":"Target System Timestamp Precision","identifiesControllerService":false,"sensitive":false,"dynamic":false},"track-performance":{"name":"track-performance","displayName":"Track Performance","identifiesControllerService":false,"sensitive":false,"dynamic":false},"max-performance-metrics":{"name":"max-performance-metrics","displayName":"Maximum Number of Files to Track","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Minimum File Size":{"name":"Minimum File Size","displayName":"Minimum File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore Hidden Files":{"name":"Ignore Hidden Files","displayName":"Ignore Hidden Files","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-state-cache":{"name":"et-state-cache","displayName":"Entity Tracking State Cache","identifiesControllerService":true,"sensitive":false,"dynamic":false},"max-operation-time":{"name":"max-operation-time","displayName":"Max Disk Operation Time","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"1 min","schedulingStrategy":"TIMER_DRIVEN","executionNode":"PRIMARY","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"19c08405-d394-383e-0000-0000439a57a9","instanceIdentifier":"3b19dbf0-2110-3896-928e-87939cf9204d","name":"LogAttribute","comments":"","position":{"x":-849.774763346388,"y":-619.6142884234246},"type":"org.apache.nifi.processors.standard.LogAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"Log prefix":null,"character-set":"UTF-8","Log FlowFile Properties":"true","Log Level":"info","attributes-to-ignore-regex":null,"Attributes to Ignore":null,"Attributes to Log":null,"attributes-to-log-regex":".*","Output Format":"Line per Attribute","Log Payload":"false"},"propertyDescriptors":{"Log prefix":{"name":"Log prefix","displayName":"Log prefix","identifiesControllerService":false,"sensitive":false,"dynamic":false},"character-set":{"name":"character-set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Log FlowFile Properties":{"name":"Log FlowFile Properties","displayName":"Log FlowFile Properties","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Log Level":{"name":"Log Level","displayName":"Log Level","identifiesControllerService":false,"sensitive":false,"dynamic":false},"attributes-to-ignore-regex":{"name":"attributes-to-ignore-regex","displayName":"Attributes to Ignore by Regular Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Attributes to Ignore":{"name":"Attributes to Ignore","displayName":"Attributes to Ignore","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Attributes to Log":{"name":"Attributes to Log","displayName":"Attributes to Log","identifiesControllerService":false,"sensitive":false,"dynamic":false},"attributes-to-log-regex":{"name":"attributes-to-log-regex","displayName":"Attributes to Log by Regular Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Format":{"name":"Output Format","displayName":"Output Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Log Payload":{"name":"Log Payload","displayName":"Log Payload","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"40b587ec-1f29-39b7-0000-00002ad23294","instanceIdentifier":"e813a5e8-8409-38b1-8b78-ba4836cb23ca","name":"query_api","comments":"","position":{"x":-456.0,"y":-1056.0},"type":"org.apache.nifi.processors.standard.HandleHttpRequest","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"multipart-request-max-size":"1 MB","parameters-to-attributes":null,"Allow POST":"true","Hostname":"0.0.0.0","Default URL Character Set":"UTF-8","Allow DELETE":"true","Request Header Maximum Size":"8 KB","Maximum Threads":"200","HTTP Protocols":"HTTP_1_1","Additional HTTP Methods":null,"container-queue-size":"50","HTTP Context Map":"992a5dba-e5e2-399e-a8a1-07d5d5d9911b","multipart-read-buffer-size":"512 KB","SSL Context Service":null,"Allow OPTIONS":"false","Allowed Paths":"/search_candidates","Allow GET":"true","Allow HEAD":"false","Listening Port":"8083","Client Authentication":"No Authentication","Allow PUT":"true"},"propertyDescriptors":{"multipart-request-max-size":{"name":"multipart-request-max-size","displayName":"Multipart Request Max Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"parameters-to-attributes":{"name":"parameters-to-attributes","displayName":"Parameters to Attributes List","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow POST":{"name":"Allow POST","displayName":"Allow POST","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Hostname":{"name":"Hostname","displayName":"Hostname","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Default URL Character Set":{"name":"Default URL Character Set","displayName":"Default URL Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow DELETE":{"name":"Allow DELETE","displayName":"Allow DELETE","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Header Maximum Size":{"name":"Request Header Maximum Size","displayName":"Request Header Maximum Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Threads":{"name":"Maximum Threads","displayName":"Maximum Threads","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Protocols":{"name":"HTTP Protocols","displayName":"HTTP Protocols","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Additional HTTP Methods":{"name":"Additional HTTP Methods","displayName":"Additional HTTP Methods","identifiesControllerService":false,"sensitive":false,"dynamic":false},"container-queue-size":{"name":"container-queue-size","displayName":"Container Queue Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Context Map":{"name":"HTTP Context Map","displayName":"HTTP Context Map","identifiesControllerService":true,"sensitive":false,"dynamic":false},"multipart-read-buffer-size":{"name":"multipart-read-buffer-size","displayName":"Multipart Read Buffer Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Allow OPTIONS":{"name":"Allow OPTIONS","displayName":"Allow OPTIONS","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allowed Paths":{"name":"Allowed Paths","displayName":"Allowed Paths","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow GET":{"name":"Allow GET","displayName":"Allow GET","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow HEAD":{"name":"Allow HEAD","displayName":"Allow HEAD","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Listening Port":{"name":"Listening Port","displayName":"Listening Port","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Client Authentication":{"name":"Client Authentication","displayName":"Client Authentication","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow PUT":{"name":"Allow PUT","displayName":"Allow PUT","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"481cdfb5-29d2-3d3e-0000-0000003f1405","instanceIdentifier":"726daa69-3571-3985-bb65-72500bbb24d0","name":"embedd generation","comments":"","position":{"x":-448.0,"y":-688.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"AWS_REGION":"us-west-2","argumentsStrategy":"Command Arguments Property","Working Directory":"/home/nifi/nifi2/users/yogesh/code","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/code/embedding.py","Max Attribute Length":"256","Output MIME Type":null,"Output Destination Attribute":null,"EMBEDDING_PROVIDER":"azure","EMBEDDING_MODEL":"text-embedding-ada-002","AZURE_OPENAI_EMBEDDING_MODEL":"text-embedding-ada-002"},"propertyDescriptors":{"AWS_REGION":{"name":"AWS_REGION","displayName":"AWS_REGION","identifiesControllerService":false,"sensitive":false,"dynamic":true},"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"AZURE_OPENAI_KEY":{"name":"AZURE_OPENAI_KEY","displayName":"AZURE_OPENAI_KEY","identifiesControllerService":false,"sensitive":true,"dynamic":true},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false},"AZURE_OPENAI_ENDPOINT":{"name":"AZURE_OPENAI_ENDPOINT","displayName":"AZURE_OPENAI_ENDPOINT","identifiesControllerService":false,"sensitive":true,"dynamic":true},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"EMBEDDING_PROVIDER":{"name":"EMBEDDING_PROVIDER","displayName":"EMBEDDING_PROVIDER","identifiesControllerService":false,"sensitive":false,"dynamic":true},"EMBEDDING_MODEL":{"name":"EMBEDDING_MODEL","displayName":"EMBEDDING_MODEL","identifiesControllerService":false,"sensitive":false,"dynamic":true},"AZURE_OPENAI_EMBEDDING_MODEL":{"name":"AZURE_OPENAI_EMBEDDING_MODEL","displayName":"AZURE_OPENAI_EMBEDDING_MODEL","identifiesControllerService":false,"sensitive":false,"dynamic":true},"AZURE_OPENAI_API_VERSION":{"name":"AZURE_OPENAI_API_VERSION","displayName":"AZURE_OPENAI_API_VERSION","identifiesControllerService":false,"sensitive":true,"dynamic":true}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"e987bd8c-bd97-377f-9ef4-90e801b69485","instanceIdentifier":"e0176120-0197-1000-0000-000027108978","name":"HandleHttpResponse","comments":"","position":{"x":-440.0,"y":-176.0},"type":"org.apache.nifi.processors.standard.HandleHttpResponse","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"HTTP Context Map":"992a5dba-e5e2-399e-a8a1-07d5d5d9911b","Attributes to add to the HTTP Response (Regex)":null,"HTTP Status Code":"200"},"propertyDescriptors":{"HTTP Context Map":{"name":"HTTP Context Map","displayName":"HTTP Context Map","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Attributes to add to the HTTP Response (Regex)":{"name":"Attributes to add to the HTTP Response (Regex)","displayName":"Attributes to add to the HTTP Response (Regex)","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Status Code":{"name":"HTTP Status Code","displayName":"HTTP Status Code","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"b1ebc8e2-35d9-3910-0000-0000439a57a9","instanceIdentifier":"d555e461-e65f-3091-b9e7-509b81de2d43","name":"embedd generation","comments":"","position":{"x":-1441.774763346388,"y":-499.61428842342457},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"AWS_REGION":"us-west-2","argumentsStrategy":"Command Arguments Property","Working Directory":"/home/nifi/nifi2/users/yogesh/code","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/home/nifi/nifi2/users/yogesh/code/embedding.py","Max Attribute Length":"256","Output MIME Type":null,"Output Destination Attribute":null,"EMBEDDING_PROVIDER":"azure","EMBEDDING_MODEL":"text-embedding-ada-002","AZURE_OPENAI_EMBEDDING_MODEL":"text-embedding-ada-002"},"propertyDescriptors":{"AWS_REGION":{"name":"AWS_REGION","displayName":"AWS_REGION","identifiesControllerService":false,"sensitive":false,"dynamic":true},"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"AZURE_OPENAI_KEY":{"name":"AZURE_OPENAI_KEY","displayName":"AZURE_OPENAI_KEY","identifiesControllerService":false,"sensitive":true,"dynamic":true},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false},"AZURE_OPENAI_ENDPOINT":{"name":"AZURE_OPENAI_ENDPOINT","displayName":"AZURE_OPENAI_ENDPOINT","identifiesControllerService":false,"sensitive":true,"dynamic":true},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"EMBEDDING_PROVIDER":{"name":"EMBEDDING_PROVIDER","displayName":"EMBEDDING_PROVIDER","identifiesControllerService":false,"sensitive":false,"dynamic":true},"EMBEDDING_MODEL":{"name":"EMBEDDING_MODEL","displayName":"EMBEDDING_MODEL","identifiesControllerService":false,"sensitive":false,"dynamic":true},"AZURE_OPENAI_EMBEDDING_MODEL":{"name":"AZURE_OPENAI_EMBEDDING_MODEL","displayName":"AZURE_OPENAI_EMBEDDING_MODEL","identifiesControllerService":false,"sensitive":false,"dynamic":true},"AZURE_OPENAI_API_VERSION":{"name":"AZURE_OPENAI_API_VERSION","displayName":"AZURE_OPENAI_API_VERSION","identifiesControllerService":false,"sensitive":true,"dynamic":true}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"debf690a-40f8-3367-0000-0000439a57a9","instanceIdentifier":"4fd1ad3d-05fa-366a-94dd-aebae33a8afe","name":"","source":{"id":"3b38cf51-13f2-3650-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"flatten json","comments":"","instanceIdentifier":"96526ad9-6511-3e40-9f37-96bf1eeb2f81"},"destination":{"id":"19c08405-d394-383e-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"LogAttribute","comments":"","instanceIdentifier":"3b19dbf0-2110-3896-928e-87939cf9204d"},"labelIndex":0,"zIndex":27,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"ed925327-cf5a-385c-9339-f4dbb6a38e6b","instanceIdentifier":"e3742462-0197-1000-ffff-ffffad7cc9bf","name":"","source":{"id":"5cbb9076-0065-37fe-ffff-ffffcfb765bc","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"retriever","comments":"","instanceIdentifier":"02d65b03-4743-39ac-b0f6-77fe393a74ea"},"destination":{"id":"19c08405-d394-383e-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"LogAttribute","comments":"","instanceIdentifier":"3b19dbf0-2110-3896-928e-87939cf9204d"},"labelIndex":0,"zIndex":51,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"73d3f239-1caf-37f9-9668-c4947da47cd7","instanceIdentifier":"e102dd05-0197-1000-ffff-ffff82b73dcb","name":"","source":{"id":"481cdfb5-29d2-3d3e-0000-0000003f1405","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"embedd generation","comments":"","instanceIdentifier":"726daa69-3571-3985-bb65-72500bbb24d0"},"destination":{"id":"ccc0d214-629a-3d9f-0000-0000003f1405","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"retriever","comments":"","instanceIdentifier":"3698c1b0-2029-31f9-8763-3ddf8060dd25"},"labelIndex":0,"zIndex":46,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"3b602e1e-dd14-3f39-0000-00002ad23294","instanceIdentifier":"9982397f-c423-30ac-8b07-7cb33fc5578d","name":"","source":{"id":"40b587ec-1f29-39b7-0000-00002ad23294","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"query_api","comments":"","instanceIdentifier":"e813a5e8-8409-38b1-8b78-ba4836cb23ca"},"destination":{"id":"e1223dbc-b4dc-37c8-0000-00002ad23294","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"ExecuteGroovyScript","comments":"","instanceIdentifier":"7effe7b3-dd9f-3936-93d4-18bf76127b2d"},"labelIndex":0,"zIndex":41,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"6c3850d0-e4bd-3241-0000-0000439a57a9","instanceIdentifier":"95a048d5-ce7c-3f4c-9910-fe1c860d3bf9","name":"","source":{"id":"b1ebc8e2-35d9-3910-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"embedd generation","comments":"","instanceIdentifier":"d555e461-e65f-3091-b9e7-509b81de2d43"},"destination":{"id":"61ce1911-5692-3101-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"insert to elastic","comments":"","instanceIdentifier":"3bc78dee-043f-315d-a40b-2debf3cc4b44"},"labelIndex":0,"zIndex":13,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"4493d897-2045-3a21-a577-1f77948a90ca","instanceIdentifier":"e0ec32b6-0197-1000-0000-00001a4bd4ec","name":"","source":{"id":"e1223dbc-b4dc-37c8-0000-00002ad23294","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"ExecuteGroovyScript","comments":"","instanceIdentifier":"7effe7b3-dd9f-3936-93d4-18bf76127b2d"},"destination":{"id":"481cdfb5-29d2-3d3e-0000-0000003f1405","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"embedd generation","comments":"","instanceIdentifier":"726daa69-3571-3985-bb65-72500bbb24d0"},"labelIndex":0,"zIndex":45,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"0e4a43c3-5f65-3203-8414-992c5d82bece","instanceIdentifier":"e37367f8-0197-1000-0000-0000785473c1","name":"","source":{"id":"481cdfb5-29d2-3d3e-0000-0000003f1405","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"embedd generation","comments":"","instanceIdentifier":"726daa69-3571-3985-bb65-72500bbb24d0"},"destination":{"id":"19c08405-d394-383e-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"LogAttribute","comments":"","instanceIdentifier":"3b19dbf0-2110-3896-928e-87939cf9204d"},"labelIndex":0,"zIndex":49,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"9f067e31-0fd7-3b5e-0000-0000439a57a9","instanceIdentifier":"912fb1e8-0a7f-3553-b888-f2c13c08b5ef","name":"","source":{"id":"b1ebc8e2-35d9-3910-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"embedd generation","comments":"","instanceIdentifier":"d555e461-e65f-3091-b9e7-509b81de2d43"},"destination":{"id":"19c08405-d394-383e-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"LogAttribute","comments":"","instanceIdentifier":"3b19dbf0-2110-3896-928e-87939cf9204d"},"labelIndex":0,"zIndex":28,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"03ea5da4-9ed3-3bcd-0000-0000439a57a9","instanceIdentifier":"6cd78743-0a7d-35c7-8aef-bbfb1b38be7c","name":"","source":{"id":"183e298a-4884-3cc6-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"FetchFile","comments":"","instanceIdentifier":"bc7cda03-2993-38ee-bb0d-619e08dfff2f"},"destination":{"id":"3b38cf51-13f2-3650-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"flatten json","comments":"","instanceIdentifier":"96526ad9-6511-3e40-9f37-96bf1eeb2f81"},"labelIndex":0,"zIndex":14,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"36a26c71-af9c-325d-99b1-5290d68fdb54","instanceIdentifier":"e0d4bbb4-0197-1000-ffff-fffff6e5769c","name":"","source":{"id":"5cbb9076-0065-37fe-ffff-ffffcfb765bc","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"retriever","comments":"","instanceIdentifier":"02d65b03-4743-39ac-b0f6-77fe393a74ea"},"destination":{"id":"e987bd8c-bd97-377f-9ef4-90e801b69485","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"HandleHttpResponse","comments":"","instanceIdentifier":"e0176120-0197-1000-0000-000027108978"},"labelIndex":0,"zIndex":44,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"70c5c4c5-de37-37c4-9424-4f1dc2f44491","instanceIdentifier":"e3740c66-0197-1000-ffff-ffff91ef7a7d","name":"","source":{"id":"ccc0d214-629a-3d9f-0000-0000003f1405","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"retriever","comments":"","instanceIdentifier":"3698c1b0-2029-31f9-8763-3ddf8060dd25"},"destination":{"id":"19c08405-d394-383e-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"LogAttribute","comments":"","instanceIdentifier":"3b19dbf0-2110-3896-928e-87939cf9204d"},"labelIndex":0,"zIndex":50,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"97ade7ad-d232-3a3c-0000-0000439a57a9","instanceIdentifier":"a7e57c11-abba-3dba-9b72-e8f4c4f54aaf","name":"","source":{"id":"61ce1911-5692-3101-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"insert to elastic","comments":"","instanceIdentifier":"3bc78dee-043f-315d-a40b-2debf3cc4b44"},"destination":{"id":"19c08405-d394-383e-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"LogAttribute","comments":"","instanceIdentifier":"3b19dbf0-2110-3896-928e-87939cf9204d"},"labelIndex":0,"zIndex":29,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"e5ea4c29-2d17-3899-956b-bd7cc2acb1dd","instanceIdentifier":"e3731d57-0197-1000-ffff-ffff8e09a9f5","name":"","source":{"id":"e1223dbc-b4dc-37c8-0000-00002ad23294","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"ExecuteGroovyScript","comments":"","instanceIdentifier":"7effe7b3-dd9f-3936-93d4-18bf76127b2d"},"destination":{"id":"19c08405-d394-383e-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"LogAttribute","comments":"","instanceIdentifier":"3b19dbf0-2110-3896-928e-87939cf9204d"},"labelIndex":0,"zIndex":48,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"5461a4f6-eab7-386e-0000-0000439a57a9","instanceIdentifier":"ddf52076-9387-3361-b9f4-3ff766a752e1","name":"","source":{"id":"3b38cf51-13f2-3650-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"flatten json","comments":"","instanceIdentifier":"96526ad9-6511-3e40-9f37-96bf1eeb2f81"},"destination":{"id":"b1ebc8e2-35d9-3910-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"embedd generation","comments":"","instanceIdentifier":"d555e461-e65f-3091-b9e7-509b81de2d43"},"labelIndex":0,"zIndex":3,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"163fe5b2-7c9a-3ac0-0000-0000439a57a9","instanceIdentifier":"2482aea4-f065-3845-b229-788108d375ea","name":"","source":{"id":"183e298a-4884-3cc6-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"FetchFile","comments":"","instanceIdentifier":"bc7cda03-2993-38ee-bb0d-619e08dfff2f"},"destination":{"id":"19c08405-d394-383e-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"LogAttribute","comments":"","instanceIdentifier":"3b19dbf0-2110-3896-928e-87939cf9204d"},"labelIndex":0,"zIndex":26,"selectedRelationships":["failure","permission.denied","not.found"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"9e73f5f0-c271-3c9d-89aa-a28e476e70e7","instanceIdentifier":"e0d48f40-0197-1000-0000-00005e873114","name":"","source":{"id":"ccc0d214-629a-3d9f-0000-0000003f1405","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"retriever","comments":"","instanceIdentifier":"3698c1b0-2029-31f9-8763-3ddf8060dd25"},"destination":{"id":"5cbb9076-0065-37fe-ffff-ffffcfb765bc","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"retriever","comments":"","instanceIdentifier":"02d65b03-4743-39ac-b0f6-77fe393a74ea"},"labelIndex":0,"zIndex":43,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"46f297c4-697b-367b-0000-0000439a57a9","instanceIdentifier":"d4054b19-c591-31cb-8d1a-5247e2fbfc7a","name":"","source":{"id":"e2e4c4f7-3dc3-3c8c-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"ListFile","comments":"","instanceIdentifier":"72139050-11ac-3433-b7ea-54236dd977b4"},"destination":{"id":"183e298a-4884-3cc6-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"FetchFile","comments":"","instanceIdentifier":"bc7cda03-2993-38ee-bb0d-619e08dfff2f"},"labelIndex":0,"zIndex":1,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"},{"identifier":"4546b280-576f-3480-bccd-f56b0fa09902","instanceIdentifier":"e3743cf2-0197-1000-0000-0000135ee036","name":"","source":{"id":"e987bd8c-bd97-377f-9ef4-90e801b69485","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"HandleHttpResponse","comments":"","instanceIdentifier":"e0176120-0197-1000-0000-000027108978"},"destination":{"id":"19c08405-d394-383e-0000-0000439a57a9","type":"PROCESSOR","groupId":"94de7944-94fa-3676-8c90-8b75feccc497","name":"LogAttribute","comments":"","instanceIdentifier":"3b19dbf0-2110-3896-928e-87939cf9204d"},"labelIndex":0,"zIndex":52,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"94de7944-94fa-3676-8c90-8b75feccc497"}],"labels":[],"funnels":[],"controllerServices":[],"parameterContextName":"Embeddings","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"13764443-048a-35e4-9c03-33a02a70ece2"},{"identifier":"681da608-5a2f-35f0-b0ae-589f05509b57","instanceIdentifier":"e380ae84-0197-1000-0000-000015c2fff4","name":"experience","comments":"","position":{"x":280.0,"y":-808.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"a3abe9e5-3cee-3e50-8d9d-63e57880632d","instanceIdentifier":"e4200bfa-0197-1000-ffff-ffff96ad0576","name":"ListFile","comments":"","position":{"x":-672.0,"y":-1464.0},"type":"org.apache.nifi.processors.standard.ListFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"Minimum File Age":"0 sec","et-initial-listing-target":"all","Maximum File Age":null,"max-listing-time":"3 mins","record-writer":null,"Maximum File Size":null,"et-time-window":"3 hours","et-node-identifier":"${hostname()}","Recurse Subdirectories":"true","File Filter":"[^\\.].*","Path Filter":null,"Include File Attributes":"true","Input Directory Location":"Local","listing-strategy":"timestamps","Input Directory":"/home/nifi/nifi2/users/yogesh/code","target-system-timestamp-precision":"auto-detect","track-performance":"false","max-performance-metrics":"100000","Minimum File Size":"0 B","Ignore Hidden Files":"true","et-state-cache":null,"max-operation-time":"10 secs"},"propertyDescriptors":{"Minimum File Age":{"name":"Minimum File Age","displayName":"Minimum File Age","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-initial-listing-target":{"name":"et-initial-listing-target","displayName":"Entity Tracking Initial Listing Target","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Age":{"name":"Maximum File Age","displayName":"Maximum File Age","identifiesControllerService":false,"sensitive":false,"dynamic":false},"max-listing-time":{"name":"max-listing-time","displayName":"Max Directory Listing Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"record-writer":{"name":"record-writer","displayName":"Record Writer","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Maximum File Size":{"name":"Maximum File Size","displayName":"Maximum File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-time-window":{"name":"et-time-window","displayName":"Entity Tracking Time Window","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-node-identifier":{"name":"et-node-identifier","displayName":"Entity Tracking Node Identifier","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Recurse Subdirectories":{"name":"Recurse Subdirectories","displayName":"Recurse Subdirectories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Filter":{"name":"File Filter","displayName":"File Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Path Filter":{"name":"Path Filter","displayName":"Path Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Include File Attributes":{"name":"Include File Attributes","displayName":"Include File Attributes","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Input Directory Location":{"name":"Input Directory Location","displayName":"Input Directory Location","identifiesControllerService":false,"sensitive":false,"dynamic":false},"listing-strategy":{"name":"listing-strategy","displayName":"Listing Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Input Directory":{"name":"Input Directory","displayName":"Input Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"target-system-timestamp-precision":{"name":"target-system-timestamp-precision","displayName":"Target System Timestamp Precision","identifiesControllerService":false,"sensitive":false,"dynamic":false},"track-performance":{"name":"track-performance","displayName":"Track Performance","identifiesControllerService":false,"sensitive":false,"dynamic":false},"max-performance-metrics":{"name":"max-performance-metrics","displayName":"Maximum Number of Files to Track","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Minimum File Size":{"name":"Minimum File Size","displayName":"Minimum File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore Hidden Files":{"name":"Ignore Hidden Files","displayName":"Ignore Hidden Files","identifiesControllerService":false,"sensitive":false,"dynamic":false},"et-state-cache":{"name":"et-state-cache","displayName":"Entity Tracking State Cache","identifiesControllerService":true,"sensitive":false,"dynamic":false},"max-operation-time":{"name":"max-operation-time","displayName":"Max Disk Operation Time","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"1 min","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"681da608-5a2f-35f0-b0ae-589f05509b57"},{"identifier":"df90015d-8324-31ed-0000-0000315632e3","instanceIdentifier":"bc247498-6b8d-3989-b1b2-22d3de900189","name":"get all elastic","comments":"","position":{"x":-696.0,"y":-880.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":null,"Working Directory":"/home/nifi/nifi2/users/yogesh/code","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"true","Command Arguments":"/home/nifi/nifi2/users/yogesh/code/update_record.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","nonzero status"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"681da608-5a2f-35f0-b0ae-589f05509b57"},{"identifier":"4eabf914-1370-3634-0000-00001821dcee","instanceIdentifier":"16a4891a-1f26-3a6c-80b5-9cfc0ce46215","name":"get all elastic","comments":"","position":{"x":-712.0,"y":-1272.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":null,"Working Directory":"/home/nifi/nifi2/users/yogesh/code","Command Path":"/home/nifi/nifi2/users/dhruv/hrbotingestion/venv/bin/python3","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"true","Command Arguments":"/home/nifi/nifi2/users/yogesh/code/get_all_elastic.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","nonzero status"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"681da608-5a2f-35f0-b0ae-589f05509b57"},{"identifier":"ac4f314a-7122-3614-9702-f97cbe0d1051","instanceIdentifier":"e382995d-0197-1000-ffff-ffff8038b6a1","name":"ExecuteGroovyScript","comments":"","position":{"x":-704.0,"y":-1104.0},"type":"org.apache.nifi.processors.groovyx.ExecuteGroovyScript","bundle":{"group":"org.apache.nifi","artifact":"nifi-groovyx-nar","version":"2.4.0"},"properties":{"groovyx-script-body":"import org.apache.nifi.processor.io.InputStreamCallback\nimport org.apache.nifi.processor.io.OutputStreamCallback\nimport java.nio.charset.StandardCharsets\nimport groovy.json.JsonSlurper\nimport groovy.json.JsonOutput\n\n// Step 1: Get incoming FlowFile\ndef flowFile = session.get()\nif (!flowFile) return\n\ndef inputText = ''\n\n// Step 2: Read FlowFile content\nsession.read(flowFile, { inputStream ->\n    inputText = inputStream.getText(StandardCharsets.UTF_8.name())\n} as InputStreamCallback)\n\ndef jsonArray\ntry {\n    jsonArray = new JsonSlurper().parseText(inputText)\n    if (!(jsonArray instanceof List)) {\n        throw new IllegalArgumentException(\"Input must be a JSON array\")\n    }\n} catch (Exception e) {\n    log.error(\"Failed to parse input JSON array\", e)\n    session.transfer(flowFile, REL_FAILURE)\n    return\n}\n\n// Step 3: Remove original (batched) FlowFile\nsession.remove(flowFile)\n\n// Step 4: Split JSON array into individual FlowFiles\njsonArray.each { item ->\n    def newFlowFile = session.create()\n    def resultJson = JsonOutput.toJson(item)\n\n    newFlowFile = session.write(newFlowFile, { out ->\n        out.write(resultJson.getBytes(StandardCharsets.UTF_8))\n    } as OutputStreamCallback)\n\n    // Optional: Add employee_id as attribute\n    if (item.employee_id) {\n        newFlowFile = session.putAttribute(newFlowFile, \"employee_id\", item.employee_id.toString())\n    }\n\n    session.transfer(newFlowFile, REL_SUCCESS)\n}\n","groovyx-failure-strategy":"rollback","groovyx-additional-classpath":null,"groovyx-script-file":null},"propertyDescriptors":{"groovyx-script-body":{"name":"groovyx-script-body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-failure-strategy":{"name":"groovyx-failure-strategy","displayName":"Failure strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-additional-classpath":{"name":"groovyx-additional-classpath","displayName":"Additional classpath","identifiesControllerService":false,"sensitive":false,"dynamic":false},"groovyx-script-file":{"name":"groovyx-script-file","displayName":"Script File","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["FILE"]}}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"681da608-5a2f-35f0-b0ae-589f05509b57"},{"identifier":"c51dca06-d91c-312e-aaa6-3b8d10c89bba","instanceIdentifier":"e3bd4569-0197-1000-ffff-ffff94c930c0","name":"PutFile","comments":"","position":{"x":-944.0,"y":-616.0},"type":"org.apache.nifi.processors.standard.PutFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.4.0"},"properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":null,"Conflict Resolution Strategy":"fail"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"681da608-5a2f-35f0-b0ae-589f05509b57"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"72c1be85-6407-32d0-920f-8df5470e1763","instanceIdentifier":"e4201b0e-0197-1000-ffff-ffffa2f6f6a1","name":"","source":{"id":"a3abe9e5-3cee-3e50-8d9d-63e57880632d","type":"PROCESSOR","groupId":"681da608-5a2f-35f0-b0ae-589f05509b57","name":"ListFile","comments":"","instanceIdentifier":"e4200bfa-0197-1000-ffff-ffff96ad0576"},"destination":{"id":"4eabf914-1370-3634-0000-00001821dcee","type":"PROCESSOR","groupId":"681da608-5a2f-35f0-b0ae-589f05509b57","name":"get all elastic","comments":"","instanceIdentifier":"16a4891a-1f26-3a6c-80b5-9cfc0ce46215"},"labelIndex":0,"zIndex":10,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"681da608-5a2f-35f0-b0ae-589f05509b57"},{"identifier":"edfe3c68-d67b-345f-a139-83bc9ff0ffde","instanceIdentifier":"e39d0cb6-0197-1000-0000-00006c7fdd0b","name":"","source":{"id":"4eabf914-1370-3634-0000-00001821dcee","type":"PROCESSOR","groupId":"681da608-5a2f-35f0-b0ae-589f05509b57","name":"get all elastic","comments":"","instanceIdentifier":"16a4891a-1f26-3a6c-80b5-9cfc0ce46215"},"destination":{"id":"ac4f314a-7122-3614-9702-f97cbe0d1051","type":"PROCESSOR","groupId":"681da608-5a2f-35f0-b0ae-589f05509b57","name":"ExecuteGroovyScript","comments":"","instanceIdentifier":"e382995d-0197-1000-ffff-ffff8038b6a1"},"labelIndex":0,"zIndex":3,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"681da608-5a2f-35f0-b0ae-589f05509b57"},{"identifier":"eada1a90-b2b9-3c67-a1cd-9218f03102ee","instanceIdentifier":"e3dd7c2b-0197-1000-ffff-fffff8e4bf4a","name":"","source":{"id":"df90015d-8324-31ed-0000-0000315632e3","type":"PROCESSOR","groupId":"681da608-5a2f-35f0-b0ae-589f05509b57","name":"get all elastic","comments":"","instanceIdentifier":"bc247498-6b8d-3989-b1b2-22d3de900189"},"destination":{"id":"c51dca06-d91c-312e-aaa6-3b8d10c89bba","type":"PROCESSOR","groupId":"681da608-5a2f-35f0-b0ae-589f05509b57","name":"PutFile","comments":"","instanceIdentifier":"e3bd4569-0197-1000-ffff-ffff94c930c0"},"labelIndex":0,"zIndex":8,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"681da608-5a2f-35f0-b0ae-589f05509b57"},{"identifier":"9c7cba86-a373-3c3d-9de8-1f14e1d4df1e","instanceIdentifier":"e414abae-0197-1000-ffff-ffffe764f0da","name":"","source":{"id":"ac4f314a-7122-3614-9702-f97cbe0d1051","type":"PROCESSOR","groupId":"681da608-5a2f-35f0-b0ae-589f05509b57","name":"ExecuteGroovyScript","comments":"","instanceIdentifier":"e382995d-0197-1000-ffff-ffff8038b6a1"},"destination":{"id":"df90015d-8324-31ed-0000-0000315632e3","type":"PROCESSOR","groupId":"681da608-5a2f-35f0-b0ae-589f05509b57","name":"get all elastic","comments":"","instanceIdentifier":"bc247498-6b8d-3989-b1b2-22d3de900189"},"labelIndex":0,"zIndex":9,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"681da608-5a2f-35f0-b0ae-589f05509b57"}],"labels":[],"funnels":[],"controllerServices":[],"parameterContextName":"Embeddings","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"13764443-048a-35e4-9c03-33a02a70ece2"}],"remoteProcessGroups":[],"processors":[],"inputPorts":[],"outputPorts":[],"connections":[],"labels":[],"funnels":[],"controllerServices":[{"identifier":"992a5dba-e5e2-399e-a8a1-07d5d5d9911b","instanceIdentifier":"b94b3b26-1403-3a57-9e0c-88196a5b89ea","name":"StandardHttpContextMap","comments":"","type":"org.apache.nifi.http.StandardHttpContextMap","bundle":{"group":"org.apache.nifi","artifact":"nifi-http-context-map-nar","version":"2.4.0"},"properties":{"Request Expiration":"1 min","Maximum Outstanding Requests":"5000"},"propertyDescriptors":{"Request Expiration":{"name":"Request Expiration","displayName":"Request Expiration","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Outstanding Requests":{"name":"Maximum Outstanding Requests","displayName":"Maximum Outstanding Requests","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"controllerServiceApis":[{"type":"org.apache.nifi.http.HttpContextMap","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"2.4.0"}}],"scheduledState":"DISABLED","bulletinLevel":"WARN","componentType":"CONTROLLER_SERVICE","groupIdentifier":"13764443-048a-35e4-9c03-33a02a70ece2"}],"parameterContextName":"Embeddings","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","logFileSuffix":"","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP"},"externalControllerServices":{},"parameterContexts":{"Embeddings":{"name":"Embeddings","parameters":[{"name":"EMBEDDING_PROVIDER","description":"","sensitive":false,"provided":false,"value":"aws"},{"name":"EMBEDDING_MODEL","description":"","sensitive":false,"provided":false,"value":"amazon.titan-embed-text-v2:0"}],"inheritedParameterContexts":[],"componentType":"PARAMETER_CONTEXT"}},"flowEncodingVersion":"1.0","parameterProviders":{},"latest":false}